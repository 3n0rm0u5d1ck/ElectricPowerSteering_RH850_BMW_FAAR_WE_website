---
layout: default
title: R20UT3710EJ0102-AUTOSAR
nav_order: 3
parent: Flash Driver
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p>AUTOSAR MCAL R4.0.3</p>
<p> </p>
<p>User's Manual</p>
<p> </p>
<p>FLS Driver Component Ver.1.0.5 </p>
<p>Embedded User's Manual </p>
<p>Target Device: </p>
<p>RH850/P1x </p>
<p>All information contained in these materials, including products and product specifications, </p>
<p>represents information on the product at the time of publication and is subject to change by </p>
<p>Renesas Electronics Corp. without notice. Please review the latest information published by </p>
<p>Renesas Electronics Corp. through various means, including the Renesas Electronics Corp. </p>
<p>website (http://www.renesas.com). </p>
<p>www.renesas.com </p>
<p>Rev.1.02 May 2017</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>2 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>3 </b></p>
<p> </p>
<p>Notice </p>
<p>1.</p>
<p> </p>
<p>Descriptions of circuits, software and other related information in this document are provided only to illustrate the operation of </p>
<p>semiconductor products and application examples. You are fully responsible for the incorporation or any other use of the </p>
<p>circuits, software, and information in the design of your product or system. Renesas Electronics disclaims any and all liability </p>
<p>for any losses and damages incurred by you or third parties arising from the use of these circuits, software, or information. </p>
<p>2.</p>
<p> </p>
<p>Renesas Electronics hereby expressly disclaims any warranties against and liability for infringement or any other disputes involving </p>
<p>patents, copyrights, or other intellectual property rights of third parties, by or arising from the use of Renesas Electronics products or </p>
<p>technical information described in this document, including but not limited to, the product data, drawing, chart, program, algorithm, </p>
<p>application examples. </p>
<p>3.</p>
<p> </p>
<p>No license, express, implied or otherwise, is granted hereby under any patents, copyrights or other intellectual property rights of </p>
<p>Renesas Electronics or others. </p>
<p>4.</p>
<p> </p>
<p>You shall not alter, modify, copy, or otherwise misappropriate any Renesas Electronics product, whether in whole or in part. Renesas </p>
<p>Electronics disclaims any and all liability for any losses or damages incurred by you or third parties arising from such alteration, </p>
<p>modification, copy or otherwise misappropriation of Renesas Electronics products. </p>
<p>5.</p>
<p> </p>
<p>Renesas Electronics products are classified according to the following two quality grades: &quot;Standard&quot; and &quot;High Quality&quot;. The intended </p>
<p>applications for each Renesas Electronics product depends on the product’s quality grade, as indicated below.  </p>
<p>&quot;Standard&quot;:          Computers; office equipment; communications equipment; test and measurement equipment; audio and visual </p>
<p>equipment; home electronic appliances; machine tools; personal electronic equipment; and industrial robots etc. </p>
<p>&quot;High Quality&quot;:   Transportation equipment (automobiles, trains, ships, etc.); traffic control (traffic lights); large-scale </p>
<p>communication equipment; key financial terminal systems; safety control equipment; etc. </p>
<p>Renesas Electronics products are neither intended nor authorized for use in products or systems that may pose a direct threat to human </p>
<p>life or bodily injury (artificial life support devices or systems, surgical implantations etc.), or may cause serious property damages </p>
<p>(space and undersea repeaters; nuclear power control systems; aircraft control systems; key plant systems; military equipment; etc.). </p>
<p>Renesas Electronics disclaims any and all liability for any damages or losses incurred by you or third parties arising from the use of any </p>
<p>Renesas Electronics product for which the product is not intended by Renesas Electronics. </p>
<p>6.</p>
<p> </p>
<p>When using the Renesas Electronics products, refer to the latest product information (data sheets, user’s manuals, application notes, </p>
<p>&quot;General Notes for Handling and Using Semiconductor Devices&quot; in the reliability handbook, etc.), and ensure that usage conditions are </p>
<p>within the ranges specified by Renesas Electronics with respect to maximum ratings, operating power supply voltage range, heat </p>
<p>radiation characteristics, installation, etc. Renesas Electronics disclaims any and all liability for any malfunctions or failure or accident </p>
<p>arising out of the use of Renesas Electronics products beyond such specified ranges. </p>
<p>7.</p>
<p> </p>
<p>Although Renesas Electronics endeavors to improve the quality and reliability of Renesas Electronics products, semiconductor products </p>
<p>have specific characteristics such as the occurrence of failure at a certain rate and malfunctions under certain use conditions. Further, </p>
<p>Renesas Electronics products are not subject to radiation resistance design. Please ensure to implement safety measures to guard them </p>
<p>against the possibility of bodily injury, injury or damage caused by fire, and social damage in the event of failure or malfunction of </p>
<p>Renesas Electronics products, such as safety design for hardware and software including but not limited to redundancy, fire control and </p>
<p>malfunction prevention, appropriate treatment for aging degradation or any other appropriate measures by your own responsibility as </p>
<p>warranty for your products/system. Because the evaluation of microcomputer software alone is very difficult and not practical, please </p>
<p>evaluate the safety of the final products or systems manufactured by you. </p>
<p>8.</p>
<p> </p>
<p>Please contact a Renesas Electronics sales office for details as to environmental matters such as the environmental compatibility of </p>
<p>each Renesas Electronics product. Please investigate applicable laws and regulations that regulate the inclusion or use of controlled </p>
<p>substances, including without limitation, the EU RoHS Directive carefully and sufficiently and use Renesas Electronics products in </p>
<p>compliance with all these applicable laws and regulations. Renesas Electronics disclaims any and all liability for damages or losses </p>
<p>occurring as a result of your noncompliance with applicable laws and regulations. </p>
<p>9.</p>
<p> </p>
<p>Renesas Electronics products and technologies shall not be used for or incorporated into any products or systems whose manufacture, </p>
<p>use, or sale is prohibited under any applicable domestic or foreign laws or regulations. You shall not use Renesas Electronics products </p>
<p>or technologies for (1) any purpose relating to the development, design, manufacture, use, stockpiling, etc., of weapons of mass </p>
<p>destruction, such as nuclear weapons, chemical weapons, or biological weapons, or missiles (including unmanned aerial vehicles </p>
<p>(UAVs)) for delivering such weapons, (2) any purpose relating to the development, design, manufacture, or use of conventional </p>
<p>weapons, or (3) any other purpose of disturbing international peace and security, and you shall not sell, export, lease, transfer, or </p>
<p>release Renesas Electronics products or technologies to any third party whether directly or indirectly with knowledge or reason to know </p>
<p>that the third party or any other party will engage in the activities described above. When exporting, selling, transferring, etc., Renesas </p>
<p>Electronics products or technologies, you shall comply with any applicable export control laws and regulations promulgated and </p>
<p>administered by the governments of the countries asserting jurisdiction over the parties or transactions. </p>
<p>10.</p>
<p> </p>
<p>Please acknowledge and agree that you shall bear all the losses and damages which are incurred from the misuse or violation of the </p>
<p>terms and conditions described in this document, including this notice, and hold Renesas Electronics harmless, if such misuse or </p>
<p>violation results from your resale or making Renesas Electronics products available any third party. </p>
<p>11.</p>
<p> </p>
<p>This document shall not be reprinted, reproduced or duplicated in any form, in whole or in part, without prior written consent of </p>
<p>Renesas Electronics. </p>
<p>12.</p>
<p> </p>
<p>Please contact a Renesas Electronics sales office if you have any questions regarding the information contained in this document or </p>
<p>Renesas Electronics products. </p>
<p> </p>
<p>(Note 1)   &quot;Renesas Electronics&quot; as used in this document means Renesas Electronics Corporation and also includes its majority-</p>
<p>owned subsidiaries. </p>
<p>(Note 2)   &quot;Renesas Electronics product(s)&quot; means any product developed or manufactured by or for Renesas Electronics. </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>4 </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>5 </b></p>
<p><b>Abbreviations and Acronyms </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Abbreviation / Acronym</b></p>
<p> </p>
<p><b>Description</b></p>
<p> </p>
<p> ANSI </p>
<p> American National Standards Institute </p>
<p> ADC </p>
<p> Analog to Digital Converter </p>
<p> API </p>
<p> Application Programming Interface </p>
<p> AUTOSAR </p>
<p> AUTomotive Open System ARchitecture </p>
<p> BSW </p>
<p> Basic SoftWare </p>
<p> BSWMDT </p>
<p> Basic Software Module Description Template </p>
<p> BUS </p>
<p> Bidirectional Universal Switch </p>
<p> CPU </p>
<p> Central Processing Unit </p>
<p> CAN </p>
<p> Controller Area Network </p>
<p> DET/Det </p>
<p> Development Error Tracer </p>
<p> DEM/Dem </p>
<p> Diagnostic Event Manager </p>
<p> DIO </p>
<p> Digital Input Output </p>
<p> DMA </p>
<p> Direct Memory Access </p>
<p> DED </p>
<p> Double bit Error Detection </p>
<p> EEPROM </p>
<p> Electrically Erasable Programmable Read Only Memory </p>
<p> ECU </p>
<p> Electronic Control Unit </p>
<p> ECC </p>
<p> Error Correction Code </p>
<p> FACI </p>
<p> Flash Application Command Interface </p>
<p> FCU </p>
<p> Flash Control Unit </p>
<p> FLS </p>
<p> FLaSh Driver </p>
<p> GPT </p>
<p> General Purpose Timer </p>
<p> GNU </p>
<p> GNU’s Not Unix </p>
<p> HW </p>
<p> HardWare </p>
<p> ID/Id </p>
<p> Identifier </p>
<p> IO </p>
<p> InOut </p>
<p> ICU </p>
<p> Input Capture Unit </p>
<p> I/O </p>
<p> Input/Output </p>
<p> ISR </p>
<p> Interrupt Service Routine </p>
<p> KB </p>
<p> Kilo Byte </p>
<p> LIN </p>
<p> Local Interconnect Network </p>
<p> MB </p>
<p> Mega Byte </p>
<p> MHz </p>
<p> Mega Hertz </p>
<p> MCU </p>
<p> Micro Controller Unit </p>
<p> MCAL </p>
<p> Microcontroller Abstraction Layer </p>
<p> NA </p>
<p> Not Applicable </p>
<p> OS </p>
<p> Operating System </p>
<p> PDF </p>
<p> Parameter definition file </p>
<p> PWM </p>
<p> Pulse Width Modulation </p>
<p> RAM </p>
<p> Random Access Memory </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>6 </b></p>
<p><b>Abbreviation / Acronym</b></p>
<p> </p>
<p><b>Description</b></p>
<p> </p>
<p> ROM </p>
<p> Read Only Memory </p>
<p> R/W/RW </p>
<p> Read/Write/Read and Write </p>
<p> RTE </p>
<p> Run Time Environment </p>
<p> SCHM/SchM </p>
<p> Scheduler Manager </p>
<p> SCI </p>
<p> Serial Communications Interface </p>
<p> SPI </p>
<p> Serial Peripheral Interface </p>
<p> SED </p>
<p> Single bit Error Detection </p>
<p> SW </p>
<p> SoftWare </p>
<p> WDT </p>
<p> Watch Dog Timer </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Definitions </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Term</b></p>
<p> </p>
<p><b>Represented by</b></p>
<p> </p>
<p>Sl. No.</p>
<p> </p>
<p>Serial Number</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>7 </b></p>
<p><b>Table of Contents </b></p>
<p> </p>
<p> </p>
<p><b>Chapter 1</b></p>
<p> </p>
<p><b>Introduction....................................................................... 11</b></p>
<p> </p>
<p><b>1.1</b></p>
<p> </p>
<p><b>Document Overview ........................................................................................................... 13</b></p>
<p> </p>
<p><b>Chapter 2</b></p>
<p> </p>
<p><b>Reference Documents ...................................................... 15</b></p>
<p> </p>
<p><b>Chapter 3</b></p>
<p> </p>
<p><b>Integration and Build Process ......................................... 17</b></p>
<p> </p>
<p><b>3.1.</b></p>
<p> </p>
<p><b>FLS Driver Component Make file ...................................................................................... 17</b></p>
<p> </p>
<p><b>3.1.1.</b></p>
<p> </p>
<p><b>Folder Structure ................................................................................................. 17</b></p>
<p> </p>
<p><b>Chapter 4</b></p>
<p> </p>
<p><b>Forethoughts .................................................................... 19</b></p>
<p> </p>
<p><b>4.1.</b></p>
<p> </p>
<p><b>General ................................................................................................................................. 19</b></p>
<p> </p>
<p><b>4.2.</b></p>
<p> </p>
<p><b>Preconditions ...................................................................................................................... 22</b></p>
<p> </p>
<p><b>4.3.</b></p>
<p> </p>
<p><b>Data Consistency ................................................................................................................ 25</b></p>
<p> </p>
<p><b>4.4.</b></p>
<p> </p>
<p><b>Deviation List ...................................................................................................................... 27</b></p>
<p> </p>
<p><b>4.5.</b></p>
<p> </p>
<p><b>User mode and supervisor mode ...................................................................................... 28</b></p>
<p> </p>
<p><b>Chapter 5</b></p>
<p> </p>
<p><b>Architecture Details .......................................................... 29</b></p>
<p> </p>
<p><b>Chapter 6</b></p>
<p> </p>
<p><b>Registers Details ............................................................... 35</b></p>
<p> </p>
<p><b>Chapter 7</b></p>
<p> </p>
<p><b>Interaction between the User and FLS Driver Component </b></p>
<p><b> </b></p>
<p><b>  .......................................................................................... 39</b></p>
<p> </p>
<p><b>7.1.</b></p>
<p> </p>
<p><b>Services Provided by FLS Driver Component to the User ............................................. 39</b></p>
<p> </p>
<p><b>Chapter 8</b></p>
<p> </p>
<p><b>FLS Driver Component Header and Source File </b></p>
<p><b>Description .......................................................................................... 41</b></p>
<p> </p>
<p><b>Chapter 9</b></p>
<p> </p>
<p><b>Generation Tool Guide ..................................................... 45</b></p>
<p> </p>
<p><b>Chapter 10</b></p>
<p> </p>
<p><b>Application Programming Interface ............................... 47</b></p>
<p> </p>
<p><b>10.1.</b></p>
<p> </p>
<p><b>Imported Types ................................................................................................................... 47</b></p>
<p> </p>
<p><b>10.1.1.</b></p>
<p> </p>
<p><b>Standard Types .................................................................................................. 47</b></p>
<p> </p>
<p><b>10.1.2.</b></p>
<p> </p>
<p><b>Other Module Types ........................................................................................... 47</b></p>
<p> </p>
<p><b>10.2.</b></p>
<p> </p>
<p><b>Type Definitions .................................................................................................................. 47</b></p>
<p> </p>
<p><b>10.2.1</b></p>
<p> </p>
<p><b>Fls_ConfigType .................................................................................................. 47</b></p>
<p> </p>
<p><b>10.2.2</b></p>
<p> </p>
<p><b>Fls_AddressType ............................................................................................... 48</b></p>
<p> </p>
<p><b>10.2.3</b></p>
<p> </p>
<p><b>Fls_LengthType .................................................................................................. 48</b></p>
<p> </p>
<p><b>10.3.</b></p>
<p> </p>
<p><b>Function Definitions ........................................................................................................... 48</b></p>
<p> </p>
<p><b>10.3.1.</b></p>
<p> </p>
<p><b>Fls_Init ................................................................................................................. 49</b></p>
<p> </p>
<p><b>10.3.2.</b></p>
<p> </p>
<p><b>Fls_Erase ............................................................................................................ 49</b></p>
<p> </p>
<p><b>10.3.3.</b></p>
<p> </p>
<p><b>Fls_Write ............................................................................................................. 50</b></p>
<p> </p>
<p><b>10.3.4.</b></p>
<p> </p>
<p><b>Fls_Cancel .......................................................................................................... 51</b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>8 </b></p>
<p><b>10.3.5.</b></p>
<p> </p>
<p><b>Fls_GetStatus ..................................................................................................... 51</b></p>
<p> </p>
<p><b>10.3.6.</b></p>
<p> </p>
<p><b>Fls_GetJobResult ............................................................................................... 52</b></p>
<p> </p>
<p><b>10.3.7.</b></p>
<p> </p>
<p><b>Fls_MainFunction ............................................................................................... 52</b></p>
<p> </p>
<p><b>10.3.8.</b></p>
<p> </p>
<p><b>Fls_Read ............................................................................................................. 53</b></p>
<p> </p>
<p><b>10.3.9.</b></p>
<p> </p>
<p><b>Fls_Compare....................................................................................................... 53</b></p>
<p> </p>
<p><b>10.3.10.</b></p>
<p> </p>
<p><b>Fls_SetMode ....................................................................................................... 54</b></p>
<p> </p>
<p><b>10.3.11.</b></p>
<p> </p>
<p><b>Fls_GetVersionInfo ............................................................................................ 54</b></p>
<p> </p>
<p><b>10.3.12.</b></p>
<p> </p>
<p><b>Fls_ReadImmediate ........................................................................................... 55</b></p>
<p> </p>
<p><b>10.3.13.</b></p>
<p> </p>
<p><b>Fls_BlankCheck ................................................................................................. 55</b></p>
<p> </p>
<p><b>10.3.14.</b></p>
<p> </p>
<p><b>Fls_Suspend ....................................................................................................... 56</b></p>
<p> </p>
<p><b>10.3.15.</b></p>
<p> </p>
<p><b>Fls_Resume ........................................................................................................ 57</b></p>
<p> </p>
<p><b>10.3.16.</b></p>
<p> </p>
<p><b>Fls_CallSwitchBFlashErrorNotification ........................................................... 57</b></p>
<p> </p>
<p><b>Chapter 11</b></p>
<p> </p>
<p><b>Development and Production Errors ............................. 59</b></p>
<p> </p>
<p><b>11.1</b></p>
<p> </p>
<p><b>FLS Driver Component Development Errors ................................................................... 59</b></p>
<p> </p>
<p><b>11.2</b></p>
<p> </p>
<p><b>FLS Driver Component Production Errors ....................................................................... 60</b></p>
<p> </p>
<p><b>Chapter 12</b></p>
<p> </p>
<p><b>Memory Organization ...................................................... 63</b></p>
<p> </p>
<p><b>Chapter 13</b></p>
<p> </p>
<p><b>P1M Specific Information ................................................ 65</b></p>
<p> </p>
<p><b>13.1.</b></p>
<p> </p>
<p><b>Interaction between the User and FLS Driver Component ............................................. 65</b></p>
<p> </p>
<p><b>13.1.1.</b></p>
<p> </p>
<p><b>Translation header File ...................................................................................... 65</b></p>
<p> </p>
<p><b>13.1.2.</b></p>
<p> </p>
<p><b>Services Provided by FLS Driver Component to the User ............................ 65</b></p>
<p> </p>
<p><b>13.1.3.</b></p>
<p> </p>
<p><b>Parameter Definition File ................................................................................... 66</b></p>
<p> </p>
<p><b>13.1.4.</b></p>
<p> </p>
<p><b>ISR Functions for FLS module .......................................................................... 66</b></p>
<p> </p>
<p><b>13.1.5.</b></p>
<p> </p>
<p><b>Data Flash Address Space ................................................................................ 66</b></p>
<p> </p>
<p><b>13.2.</b></p>
<p> </p>
<p><b>Sample Application............................................................................................................. 66</b></p>
<p> </p>
<p><b>13.2.1.</b></p>
<p> </p>
<p><b>Sample Application Structure ........................................................................... 66</b></p>
<p> </p>
<p><b>13.2.2.</b></p>
<p> </p>
<p><b>Building Sample Application ............................................................................ 68</b></p>
<p> </p>
<p><b>13.3.</b></p>
<p> </p>
<p><b>Memory and Throughput ................................................................................................... 70</b></p>
<p> </p>
<p><b>13.3.1.</b></p>
<p> </p>
<p><b>ROM/RAM Usage ................................................................................................ 70</b></p>
<p> </p>
<p><b>13.3.2.</b></p>
<p> </p>
<p><b>Stack Depth......................................................................................................... 71</b></p>
<p> </p>
<p><b>13.3.3.</b></p>
<p> </p>
<p><b>Throughput Details ............................................................................................ 71</b></p>
<p> </p>
<p><b>Chapter 14</b></p>
<p> </p>
<p><b>Release Details ................................................................ 75</b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>9 </b></p>
<p><b>List of Figures </b></p>
<p><b> </b></p>
<p>Figure 1-1</p>
<p> </p>
<p>System Overview of FLS Driver Component in AUTOSAR MCAL Layer ............ 11</p>
<p> </p>
<p>Figure 1-2</p>
<p> </p>
<p>System Overview of AUTOSAR Architecture ...................................................... 12</p>
<p> </p>
<p>Figure 5-1</p>
<p> </p>
<p>FLS Driver Component Architecture .................................................................... 29</p>
<p> </p>
<p>Figure 5-2</p>
<p> </p>
<p>Component Overview of FLS Driver Component ................................................. 30</p>
<p> </p>
<p>Figure 12-1</p>
<p> </p>
<p>FLS Driver Component Memory Organization ..................................................... 63</p>
<p> </p>
<p>Figure 13-1</p>
<p> </p>
<p>Overview of FLS Driver Sample Application ........................................................ 67</p>
<p> </p>
<p><b> </b></p>
<p> </p>
<p><b>List of Tables </b></p>
<p><b> </b></p>
<p>Table 4-1                 FLS Driver Protected Resources List ................................................................... 25</p>
<p> </p>
<p>Table 4-2                 FLS Driver Component Deviation List .................................................................. 27</p>
<p> </p>
<p>Table 4-3                 User mode and Supervisor mode details ............................................................. 28</p>
<p> </p>
<p>Table 6-1                 Register Details .................................................................................................... 35</p>
<p> </p>
<p>Table 8-1                 Description of the FLS Driver Component Files ................................................... 42</p>
<p> </p>
<p>Table 10-1               Fls_ConfigType .................................................................................................... 47</p>
<p> </p>
<p>Table 10-2               Fls_AddressType ................................................................................................. 48</p>
<p> </p>
<p>Table 10-3               Fls_LengthType .................................................................................................... 48</p>
<p> </p>
<p>Table 10-4               API Provided by FLS Driver Component .............................................................. 48</p>
<p> </p>
<p>Table 11-1               DET Errors of FLS Driver Component ................................................................. 59</p>
<p> </p>
<p>Table 11-2               DEM Errors of FLS Driver Component ................................................................. 60</p>
<p> </p>
<p>Table 13-1               PDF information for P1M ...................................................................................... 66</p>
<p> </p>
<p>Table 13-2               Interrupt Functions for FLS Module ...................................................................... 66</p>
<p> </p>
<p>Table 13-3               ROM/RAM Details with DET ................................................................................ 70</p>
<p> </p>
<p>Table 13-4               ROM/RAM Details without DET ........................................................................... 70</p>
<p> </p>
<p>Table 13-5               Stack Depth Table ................................................................................................ 71</p>
<p> </p>
<p>Table 13-6               Throughput Details of the APIs ............................................................................ 71</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>10 </b></p>
<h1 style="page-break-before:always; "></h1>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Introduction                                                                                                                             Chapter 1 </b></p>
<p><b> </b></p>
<p><b>11 </b></p>
<p>FLS Driver </p>
<p>DIO </p>
<p>DIO Driver </p>
<p>ADC </p>
<p>ADC Driver </p>
<p>PWM </p>
<p>P WM Driver </p>
<p>ICU </p>
<p>ICU Driver </p>
<p>FlexRay Driver </p>
<p>CAN </p>
<p>CAN Driver </p>
<p>LIN o r </p>
<p>SCI </p>
<p>LIN Driver </p>
<p>SPI HandlerDriver </p>
<p>r </p>
<p>SPI </p>
<p>EEPRO </p>
<p>M </p>
<p>Internal EEPROM Driver </p>
<p><b>FLASH </b></p>
<p><b>Internal Flash </b></p>
<p><b>Driver </b></p>
<p>Ext. BUS </p>
<p>External Flash Driver </p>
<p>RA M Test </p>
<p>Core Test </p>
<p>MCU </p>
<p>Power </p>
<p>&amp; Clock </p>
<p>Unit </p>
<p>MCU Driver </p>
<p>Watchdog Driver </p>
<p>GPT Driver </p>
<p>GPT </p>
<p>WDT </p>
<p><b>Chapter 1 </b></p>
<p><b>Introduction </b></p>
<p> </p>
<p> </p>
<p>The purpose of this document is to describe the information related to FLS </p>
<p>Driver Component for Renesas P1x microcontrollers. </p>
<p> </p>
<p>This  document  shall  be  used  as  reference  by  the  users  of  FLS  Driver </p>
<p>Component. The system overview of complete AUTOSAR architecture is </p>
<p>shown in the below Figure: </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Microcontroller Drivers </p>
<p>Memory Drivers </p>
<p>Communication Drivers </p>
<p>I/O Drivers </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Micro- </b></p>
<p><b>Controller</b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Figure 1-1 </b></p>
<p><b>System Overview of FLS Driver Component in AUTOSAR MCAL Layer </b></p>
<p> </p>
<p>The FLS Driver Component is part of BSW which is accessible by RTE. This </p>
<p>RTE  is  a  middle  ware  layer  providing  communication  services  for  the </p>
<p>application software and thereby it is possible to map the application software </p>
<p>components between different ECUs. </p>
<p> </p>
<p>The  RTE  provides  the  encapsulation  of  Hardware  channels  and  basic </p>
<p>services to the Application Software Components. So it is possible to map </p>
<p>the Application Software-Components between different ECUs. </p>
<p> </p>
<p>The Basic Software Modules are located below the RTE. The Basic Software </p>
<p>itself </p>
<p>is </p>
<p>divided </p>
<p>into </p>
<p>the </p>
<p>subgroups: </p>
<p>System </p>
<p>Services, </p>
<p>Memory, </p>
<p>Communication and IO Hardware-Abstraction. The Complex Drivers are also </p>
<p>located  below  the  RTE.  Among  others,  the  Operating  System  (OS),  the </p>
<p>Watchdog manager and the Diagnostic services are located in the System </p>
<p>Services  subgroup.  The  Memory  subgroup  contains  modules  to  provide </p>
<p>access to the non-volatile memories, namely Flash and EEPROM. Here the </p>
<p>flash operation will be handled by flash driver. </p>
<p> </p>
<p>On  board  Device  Abstraction  provides  an  interface  to  physical  values  for </p>
<p>AUTOSAR software components. It abstracts the physical origin of signals </p>
<p>(their paths to the hardware FLSs) and normalizes the signals with respect to </p>
<p>their physical appearance. The microcontroller driver provides services for </p>
<p>basic </p>
<p>microcontroller </p>
<p>initialization, </p>
<p>power </p>
<p>down </p>
<p>functionality, </p>
<p>reset </p>
<p>and </p>
<p>microcontroller specific functions required from the upper layers. </p>
<h1 style="page-break-before:always; "></h1>
<p><b> </b></p>
<p><b> </b></p>
<p><b>  Chapter 1                                                                                                                             Introduction </b></p>
<p><b> </b></p>
<p><b>12 </b></p>
<p>Application Layer</p>
<p> </p>
<p> </p>
<p> </p>
<p>AUTOSAR RTE</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>System  Services</p>
<p> </p>
<p> </p>
<p> </p>
<p>On board Device Abstraction</p>
<p> </p>
<p>  </p>
<p> </p>
<p><b>FLS Dr</b></p>
<p><b>i</b></p>
<p><b>ver</b></p>
<p> </p>
<p> </p>
<p> </p>
<p>Microcontroller</p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Figure 1-2 </b></p>
<p><b>System Overview of AUTOSAR Architecture </b></p>
<p> </p>
<p>The FLS application software components are located at the top and can gain </p>
<p>access to the rest of the ECU and also to other ECUs only through the RTE. </p>
<p>This  RTE  is  a  middleware  layer  providing  communication  services  for  the </p>
<p>application software and thereby it is possible to map the application software </p>
<p>components between different ECUs. </p>
<p> </p>
<p>This FLS Software Module is located below the RTE. The FLS Component </p>
<p>APIs are directly invoked by the application or RTE. The FLS Component is </p>
<p>responsible for erase/write/read/compare data on the data flash memory. </p>
<p> </p>
<p>The FLS component perform the activities like accessing and programming </p>
<p>the on-chip data flash hardware. </p>
<p> </p>
<p>The FLS Component layer comprises of API for erase/write data to on-chip </p>
<p>data  flash  memory  of  the  device.  The  FLS  Component  conforms  to  the </p>
<p>AUTOSAR  standard  and  is  implemented  mapping  to  the  AUTOSAR  FLS </p>
<p>Software Specification. </p>
<p> </p>
<p>The </p>
<p>functional </p>
<p>parameters </p>
<p>of </p>
<p>FLS </p>
<p>software </p>
<p>components </p>
<p>are </p>
<p>statically </p>
<p>configurable to fit as far as possible to the real needs of each ECU. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Introduction </b></p>
<p><b>Chapter 1 </b></p>
<p> </p>
<p><b>13 </b></p>
<p><b>1.1 </b></p>
<p><b>Document Overview </b></p>
<p> </p>
<p> </p>
<p>The document has been segmented for easy reference. The table below </p>
<p>provides user with an overview of the contents of each section: </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Section</b></p>
<p> </p>
<p><b>Contents</b></p>
<p> </p>
<p>Section1 (Introduction)</p>
<p> </p>
<p>This section provides an introduction and overview of FLS Driver </p>
<p>Component.</p>
<p> </p>
<p>Section 2 (Reference Documents)</p>
<p> </p>
<p>This section lists the documents referred for developing this document.</p>
<p> </p>
<p>Section 3 (Integration and Build </p>
<p>Process)</p>
<p> </p>
<p>This section explains the folder structure, Make file structure for FLS </p>
<p>Driver  Component.  This  section  also  explains  about  the  Make  file </p>
<p>descriptions, </p>
<p>Integration </p>
<p>of </p>
<p>FLS </p>
<p>Driver </p>
<p>Component </p>
<p>with </p>
<p>other </p>
<p>components, building the FLS Driver Component along with a sample </p>
<p>application.</p>
<p> </p>
<p>Section 4 (Forethoughts)</p>
<p> </p>
<p>This section provides brief information about the FLS Driver Component, </p>
<p>the  preconditions  that  should  be  known  to  the  user  before  it  is  used, </p>
<p>diagnostic </p>
<p>channel, </p>
<p>limit </p>
<p>check </p>
<p>feature, </p>
<p>sample </p>
<p>and </p>
<p>hold </p>
<p>feature, </p>
<p>conversion time and stabilization time, DMA and ISR operations, data </p>
<p>consistency details, deviation list and user mode and supervisor mode.</p>
<p> </p>
<p>Section 5 (Architecture Details)</p>
<p> </p>
<p>This section describes the layered architectural details of the FLS Driver </p>
<p>Component.</p>
<p> </p>
<p>Section 6 (Registers Details)</p>
<p> </p>
<p>This section describes the register details of FLS Driver Component.</p>
<p> </p>
<p>Section 7 (Interaction between </p>
<p>The User And FLS Driver </p>
<p>Component)</p>
<p> </p>
<p>This section describes interaction of the FLS Driver Component with the </p>
<p>upper layers.</p>
<p> </p>
<p>Section 8 (FLS Driver Component </p>
<p>Header And Source File </p>
<p>Description)</p>
<p> </p>
<p>This  section  provides  information  about  the  FLS  Driver  Component </p>
<p>source files is mentioned. This section also contains the brief note on the </p>
<p>tool generated output file.</p>
<p> </p>
<p>Section 9 (Generation Tool Guide)</p>
<p> </p>
<p>This section provides information on the FLS Driver Component Code </p>
<p>Generation Tool.</p>
<p> </p>
<p>Section 10 (Application </p>
<p>Programming Interface)</p>
<p> </p>
<p>This section explains all the APIs provided by the FLS Driver </p>
<p>Component.</p>
<p> </p>
<p>Section 11 (Development And </p>
<p>Production Errors)</p>
<p> </p>
<p>This section lists the DET and DEM errors.</p>
<p> </p>
<p>Section 12 (Memory </p>
<p>Organization)</p>
<p> </p>
<p>This section provides the typical memory organization, which must be </p>
<p>met for proper functioning of component.</p>
<p> </p>
<p>Section 13 (P1M Specific </p>
<p>Information)</p>
<p> </p>
<p>This section provides the P1M Specific Information.</p>
<p> </p>
<p>Section 14 (Release Details)</p>
<p> </p>
<p>This section provides release details with version name and base </p>
<p>version.</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> </b></p>
<p><b> </b></p>
<p><b>  Chapter 1                                                                                                                             Introduction </b></p>
<p><b> </b></p>
<p><b>14 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Reference Documents </b></p>
<p><b>Chapter 2</b></p>
<p> </p>
<p> </p>
<p><b>15 </b></p>
<p><b>Chapter 2 </b></p>
<p><b>Reference Documents </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>Title</b></p>
<p> </p>
<p><b>Version</b></p>
<p> </p>
<p>1. </p>
<p> </p>
<p> </p>
<p>AUTOSAR_SWS_FlashDriver.pdf</p>
<p> </p>
<p>3.2.0 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>2. </p>
<p> </p>
<p>r01uh0436ej0130_rh850p1x.pdf </p>
<p>1.30 </p>
<p>3. </p>
<p> </p>
<p>AUTOSAR_SWS_CompilerAbstraction.pdf </p>
<p> 3.2.0 </p>
<p>4. </p>
<p> </p>
<p>AUTOSAR_SWS_MemoryMapping.pdf </p>
<p> 1.4.0 </p>
<p>5. </p>
<p> </p>
<p>AUTOSAR_SWS_PlatformTypes.pdf </p>
<p>  2.5.0 </p>
<p>6. </p>
<p> </p>
<p>AUTOSAR BUGZILLA (http://www.autosar.org/bugzilla) </p>
<p>Note: AUTOSAR BUGZILLA is a database, which contains concerns raised </p>
<p>against information present in AUTOSAR Specifications. </p>
<p>    - </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Chapter 2                                                                                                             Reference Documents </b></p>
<p> </p>
<p><b>16 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Integration and Build Process </b></p>
<p><b>Chapter 3                                                                                                                                                                                    </b></p>
<p> </p>
<p><b>17 </b></p>
<p> </p>
<p> </p>
<p><b>Chapter 3 </b></p>
<p><b>Integration and Build Process </b></p>
<p> </p>
<p> </p>
<p>In this section the folder structure of the FLS Driver Component is explained. </p>
<p>Description of the Make files along with samples is provided in this section. </p>
<p> </p>
<p><b>Remark </b></p>
<p>The details about the C Source and Header files that are generated by the </p>
<p>FLS Driver Generation Tool are mentioned in the  </p>
<p><b>                 </b>“R20UT3711EJ0101-AUTOSAR.pdf”. </p>
<p> </p>
<p> </p>
<p><b>3.1. </b></p>
<p><b>FLS Driver Component Make file </b></p>
<p> </p>
<p>The Make file provided with the FLS Driver Component consists of the GNU </p>
<p>Make  compatible  script  to  build  the  FLS  Driver  Component  in  case  of  any </p>
<p>change in the configuration. This can be used in the upper level Make file (of </p>
<p>the application) to link and build the final application executable. </p>
<p> </p>
<p> </p>
<p><b>3.1.1. Folder Structure </b></p>
<p>The files are organized in the following folders: </p>
<p> </p>
<p><b>Remark </b></p>
<p>Trailing slash ‘\’ at the end indicates a folder </p>
<p> </p>
<p>X1X\common_platform\modules\fls\src </p>
<p>                                                              \Fls.c </p>
<p>                     \Fls_Internal.c </p>
<p>                     \Fls_Ram.c </p>
<p>        \Fls_Version.c </p>
<p>        \Fls_Private_Fcu.c </p>
<p>            \Fls_Irq.c </p>
<p> </p>
<p>X1X\common_platform\modules\fls\include </p>
<p>                                        </p>
<p>                   \Fls.h </p>
<p>                            \Fls_Debug.h </p>
<p>                            \Fls_Internal.h </p>
<p>                            \Fls_Private_Fcu.h </p>
<p>                            \Fls_PBTypes.h </p>
<p>                            \Fls_Ram.h </p>
<p>                            \Fls_Types.h </p>
<p>                            \Fls_Version.h </p>
<p>                            \Fls_Irq.h </p>
<p>                            \Fls_RegWrite.h </p>
<p> </p>
<p> </p>
<p>X1X\P1x\modules\fls\sample_application\&lt;SubVariant&gt;\make\ghs </p>
<p>\App_FLS_&lt;SubVariant&gt;_Sample.mak </p>
<p> </p>
<p>                                         X1X\P1x\modules\fls\sample_application\&lt;SubVariant&gt;\obj\&lt;compiler&gt; </p>
<p>(Note: For example, compiler can be ghs.) </p>
<p> </p>
<p>X1X\common_platform\modules\fls\generator\Fls_X1x.dll </p>
<p>tools/RUCG/RUCG.exe </p>
<p> </p>
<p> </p>
<p>X1X\P1x\common_family\generator\Global_Application_P1x.trxml </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 3      </b></p>
<p><b> </b></p>
<p><b>Integration and Build Process                                                                                                                                                                            </b></p>
<p> </p>
<p><b>18 </b></p>
<p>\Sample_Application_P1x.trxml </p>
<p>\P1x_translation.h </p>
<p> </p>
<p>X1X\P1x\modules\fls\generator </p>
<p>\R403_FLS_P1x_BSWMDT.arxml </p>
<p> </p>
<p>X1X\P1x\modules\fls\user_manual </p>
<p>(User manuals will be available in this folder) </p>
<p> </p>
<p><b>Notes:</b>  </p>
<p><b>1. </b></p>
<p>&lt;Compiler&gt; can be ghs. </p>
<p> </p>
<p><b>2. </b></p>
<p>&lt;Device_name&gt; can be 701304, 701305, 701310, 701311, 701312, 701313, </p>
<p>701314, 701315, 701318, 701319, 701320, 701321, 701322 or 701323. </p>
<p>                                          </p>
<p><b>3. </b></p>
<p>&lt;SubVariant&gt; can be P1M. </p>
<p> </p>
<p><b>4. </b></p>
<p>&lt;AUTOSAR_version&gt; can be 4.0.3. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Forethoughts  </b></p>
<p><b>Chapter 4                                                                                                                           </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>19 </b></p>
<p><b>Chapter 4 </b></p>
<p><b>Forethoughts </b></p>
<p><b>4.1. </b></p>
<p><b>General </b></p>
<p>Following information will aid the user to use the FLS Driver Component </p>
<p>software efficiently: </p>
<p> </p>
<p><b>FLS General  </b></p>
<p>• </p>
<p>The FLS Driver Component supports Data Flash access only. Code Flash </p>
<p>access is out of scope. User application shall not program Code Flash in </p>
<p>the  application  mode.  Code  Flash  shall  only  be  programmed  in  safe </p>
<p>environment in the boot mode. </p>
<p>• </p>
<p>The  start-up  code  is  ECU  specific.  FLS  Driver  Component  does  not </p>
<p>implement the start-up code. </p>
<p>• </p>
<p>Example  code  mentioned  in  this  document  shall  be  taken  only  as  a </p>
<p>reference for implementation. </p>
<p>• </p>
<p>All </p>
<p>development </p>
<p>errors </p>
<p>will </p>
<p>be </p>
<p>reported </p>
<p>to </p>
<p>DET </p>
<p>by </p>
<p>using </p>
<p>the </p>
<p>API </p>
<p>Det_ReportError provided by DET. </p>
<p>• </p>
<p>All </p>
<p>production </p>
<p>errors </p>
<p>will </p>
<p>be </p>
<p>reported </p>
<p>to </p>
<p>DEM </p>
<p>by </p>
<p>using </p>
<p>the </p>
<p>API </p>
<p>Dem_ReportErrorStatus provided by DEM. </p>
<p>• </p>
<p>The FLS Driver Component developed supports only on-chip ROM and no </p>
<p>external devices are considered. Hence the parameters related to external </p>
<p>devices are ignored by the Generation Tool. </p>
<p>• </p>
<p>The FLS Driver Component does not provide functionalities for setting of </p>
<p>protection flags, boot cluster size, swapping of boot block and flashing of </p>
<p>boot </p>
<p>block </p>
<p>and </p>
<p>they </p>
<p>are </p>
<p>out </p>
<p>of </p>
<p>scope </p>
<p>for </p>
<p>FLS </p>
<p>Driver </p>
<p>Component </p>
<p>implementations. </p>
<p>• </p>
<p>Maximum value of ‘FlsMaxReadNormalMode’ parameter specifies the size </p>
<p>of a temporary buffer in RAM which is used when Fls_ReadImmediate and </p>
<p>Fls_Compare APIs are called.  The resulting RAM consumption has to be </p>
<p>considered. </p>
<p>• </p>
<p>The length of the data that has to be programmed on to the flash should be </p>
<p>in multiples of flash page. The FLS Driver Component does not pad bytes </p>
<p>if the length is not in multiples of flash page. It is the responsibility of the </p>
<p>application to pad bytes such that the length of the data is in multiples of </p>
<p>flash page. </p>
<p>• </p>
<p>Erase, </p>
<p>Write, </p>
<p>Read </p>
<p>and </p>
<p>Blank </p>
<p>check </p>
<p>jobs </p>
<p>are </p>
<p>initiated </p>
<p>within </p>
<p>the </p>
<p>corresponding  APIs  itself.  Fls_MainFunction  API  shall  act  as  a  checker </p>
<p>function and it shall check whether the job is completed and initiate the next </p>
<p>round of job cycle if the job is not completed. </p>
<p>• </p>
<p>The  normal  write  verification  using  the  direct  memory  read  access  is </p>
<p>performed when DET is enabled. </p>
<p>• </p>
<p>The </p>
<p>FLS </p>
<p>Driver </p>
<p>Component </p>
<p>can </p>
<p>invoke </p>
<p>user </p>
<p>configurable </p>
<p>call-back </p>
<p>notification </p>
<p>functions. </p>
<p>However, </p>
<p>the </p>
<p>implementation </p>
<p>of </p>
<p>the </p>
<p>call </p>
<p>back </p>
<p>functions is the responsibility of the upper layer. </p>
<p>• </p>
<p>The parameter ‘FlsCallCycle’ shall be used for timeout implementation. The </p>
<p>Erase,  Write  and  BlankCheck  timeout  count  values  shall  be  generated </p>
<p>based  on  FlsCallCycle  and  hardware  specific  atomic  operations’  time </p>
<p>(‘FlsEraseTime’, </p>
<p>‘FlsWriteTime’ </p>
<p>and </p>
<p>‘FlsBlankCheckTime’). </p>
<p>To </p>
<p>report </p>
<p>timeout,  ‘FlsTimeOutMonitoring’  parameter  needs  to  be  configured  as </p>
<p>TRUE’. In case if the parameter ‘FlsDevErrorDetect’ is also enabled, time </p>
<p>out </p>
<p>DET </p>
<p>shall </p>
<p>be </p>
<p>reported. </p>
<p>The </p>
<p>‘FlsCallCycle’ </p>
<p>parameter </p>
<p>shall </p>
<p>be </p>
<p>configured by the user correctly. Incorrect value may lead to reporting of </p>
<p>timeout DET by Fls_MainFunction. </p>
<p>• </p>
<p>There are two possible errors that can be detected by ECC are Single-bit </p>
<p>errors  (SED)  and  Double-bit  errors  (DED).  The  ECC  error  notification </p>
<p>feature is incorporated in Read functionality only. So whenever the read is </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 4                                                                                                                          Forethoughts                                                                                                                             </b></p>
<p> </p>
<p><b>20 </b></p>
<p>initiated this feature will be enabled always and only notifying to the upper </p>
<p>layer happens via configurable notification functions. The configuration of </p>
<p>single  bit  and  double  bit  error  notification  function  parameters  are  user </p>
<p>selectable. The error notification functions for both single bit and double bit </p>
<p>ECC error report are configurable with parameters from configuration. </p>
<p>The parameters are: </p>
<p>FlsEccSedNotification: This parameter mapped to Single-bit error (SED) </p>
<p>notification routine provided by some upper layer module. </p>
<p>FlsEccDedNotification: This parameter mapped to Double-bit error (DED) </p>
<p>notification routine provided by some upper layer module. The Double bit </p>
<p>error is reported to DEM in addition to notification functions. </p>
<p>• </p>
<p>The  file  Interrupt_VectorTable.c  provided  is  just  a  Demo  and  not  all </p>
<p>interrupts  will  be  mapped  in  this  file.  So  the  user  has  to  update  the </p>
<p>Interrupt_VectorTable.c as per his configuration. </p>
<p>• </p>
<p>The accesses to HW registers is possible only in the low level driver layer. </p>
<p>The user shall never write or read directly from any register, but shall use </p>
<p>the AUTOSAR standard API provided by the MCAL.  </p>
<p>• </p>
<p>FlsTimeOutCountValue: </p>
<p>This </p>
<p>parameter </p>
<p>specifies </p>
<p>the </p>
<p>time </p>
<p>out </p>
<p>count </p>
<p>required  for  erase,  write  and  blank  check  operations  during  interrupt </p>
<p>mode.Incorrect  configuration  of  this  parameter  shall  lead  to  erroneous </p>
<p>operations of FLS Driver. </p>
<p>• </p>
<p>FlsLoopCount: This parameter is used to avoid the risk of endless loops in </p>
<p>FLS driver. The loop count can be minimum 32 to maximum 255. </p>
<p>• </p>
<p>The configurations provided for fast mode write operation is ignored by the </p>
<p>Generation Tool and only configurations for normal mode operations and </p>
<p>fast mode read operation are accepted. </p>
<p>• </p>
<p>Fls_SetMode API sets the flash driver operation mode (FAST Mode/SLOW </p>
<p>Mode) for read operation. This API allows the user to read more number of </p>
<p>bytes  during  run  time  if  in  case  the  default  mode  is  configured  as </p>
<p>‘MEMIF_MODE_FAST’.</p>
<p> </p>
<p>Fls_SetMode </p>
<p>API </p>
<p>is </p>
<p>not </p>
<p>applicable </p>
<p>for </p>
<p>Erase/Write/Blank Check operations, because underlying hardware does </p>
<p>not support it.</p>
<p> </p>
<p> </p>
<p><b>FLS Initialization  </b></p>
<p>• </p>
<p>F</p>
<p>ls_Init API shall enable the flash memory erase/write protection settings if </p>
<p>it is supported by hardware. Before the flash operation protection shall be </p>
<p>disabled and after the completion of job, protection shall be again enabled. </p>
<p>• </p>
<p>During activation of flash environment (in Fls_Init), the access to Code flash </p>
<p>is not possible. Hence the user should ensure that all the application and </p>
<p>supporting  components  code  that  needs  to  be  executed  during  flash </p>
<p>operation need to locate in RAM. </p>
<p>• </p>
<p>The </p>
<p>device </p>
<p>supports </p>
<p>servicing </p>
<p>of </p>
<p>interrupts </p>
<p>during </p>
<p>self-programming. </p>
<p>During  activation  of  flash  environment  (in  Fls_Init),  the  interrupt  vector </p>
<p>address  in  the  flash  will  not  be  available.  The  interrupt  vectors  can  be </p>
<p>relocated  to  RAM  during  flash  programming.  For  details  please  refer </p>
<p><i>Exception Handling Address Switching Function </i> in the according device </p>
<p>CPU user manual. </p>
<p> </p>
<p><b>FLS Schedule operation </b></p>
<p>• </p>
<p>The FLS Driver Component’s job processing function (Fls_MainFunction) </p>
<p>is a polled function. </p>
<p>• </p>
<p>In a single cycle of Fls_MainFunction API, the maximum number of bytes </p>
<p>processed for the fast read command and normal  read depends on the </p>
<p>configuration of parameters ‘FlsMaxReadNormalMode’ (if default mode is </p>
<p>MEMIF_MODE_SLOW)  and  ‘FlsMaxReadFastMode’  (if  default  mode  is </p>
<p>MEMIF_MODE_FAST). </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Forethoughts  </b></p>
<p><b>Chapter 4                                                                                                                           </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>21 </b></p>
<p>• </p>
<p>In  a  single  cycle  of  Fls_MainFunction  call,  FLS  driver  performs  write </p>
<p>operation  for  4  bytes,  or  blank  check  operation  for  4  bytes,  or  erase </p>
<p>operation for 64 bytes. </p>
<p> </p>
<p><b>FLS Erase Operation </b></p>
<p>• </p>
<p>The Fls_Erase API computes the sectors that need to be erased based on </p>
<p>the provided target address and length. When DET is enabled the error will </p>
<p>be reported if the length of the bytes to be erased is not in multiples of flash </p>
<p>sector size. </p>
<p> </p>
<p><b>FLS Read Operation </b></p>
<p>• </p>
<p>Data Flash Memory Read Cycle Setting Register (EEPRDCYCL) is used </p>
<p>to specify the number of wait cycles to be inserted when reading the data </p>
<p>in  the  data  flash.  The  initial  value  of  the  register  is  taken  by  default.  If </p>
<p>required  user  application  shall  set  this  register  as  per  P1M  device  user </p>
<p>manual. </p>
<p>• </p>
<p>Blank Check operation is done implicitly when performing Read operation </p>
<p><b>FLS Blank Check Operation </b></p>
<p>• </p>
<p>The processing of blank check operation is applicable for Data flash only. </p>
<p> </p>
<p><b>FLS Fast Read (Read Immediate) Operation </b></p>
<p>• </p>
<p>The functional behavior of FLS driver when calling Fls_ReadImmediate API </p>
<p>will  be  the  same  as  calling  Fls_Read  API  except  that  blank  check  is </p>
<p>excluded. </p>
<p>• </p>
<p>Blank check is time consuming and is not mandatory for reading an already </p>
<p>programmed flash area. Fls_ReadImmediate API can be used to perform </p>
<p>fast read operation without blank check when the user is sure that the area </p>
<p>to be read is already written with content. </p>
<p><b>Suspend and Resume operation </b></p>
<p>• </p>
<p>Fls_Suspend API is used to suspend an ongoing flash operation in order </p>
<p>to do other flash operations. Only erase and write operations are suspend </p>
<p>able. </p>
<p>• </p>
<p>Fls_Resume  can  only  be  used  to  resume  a  suspended  flash  operation. </p>
<p>Only erase and write operations are resume able. </p>
<p>• </p>
<p>It is not always possible to suspend.  </p>
<p>   E.g.: Any operation ► suspend ► suspend – is not possible. </p>
<p>                                                     Write or Erase ► suspend ► Erase operation – is not possible </p>
<p>                                                     Write operation ► suspend ► other Write operation – is not possible </p>
<p>      Any operation ► suspend ► other operation ► suspend–isn’t possible </p>
<p> </p>
<p><b>FLS Timeout Monitoring </b></p>
<p>• </p>
<p>The </p>
<p>configuration </p>
<p>parameter </p>
<p>FlsTimeoutMonitoring </p>
<p>in </p>
<p>the </p>
<p>FlsGeneral </p>
<p>container can be used to enable/disable the timeout supervision for FLS </p>
<p>driver independent of DET settings. </p>
<p>• </p>
<p>Only when FlsTimeoutMonitoring is set to TRUE and DET is switched ON, </p>
<p>a DET error FLS_E_TIMEOUT will be reported in case of detection of a </p>
<p>timeout error. </p>
<p>• </p>
<p>In order to perform timeout monitoring/supervision on flash operations, the </p>
<p>following configuration parameters should be used properly according to </p>
<p>use-cases. </p>
<p></p>
<p> </p>
<p>In  the  polling  mode  of  FLS,  the  parameter  FlsCallCycle  shall  be </p>
<p>configured to specify the cycle time of calls of the FLS main function (in </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 4                                                                                                                          Forethoughts                                                                                                                             </b></p>
<p> </p>
<p><b>22 </b></p>
<p>seconds). The timeout count values are calculated internally based on </p>
<p>the CPU frequency for the respective flash operations, i.e., erase, write, </p>
<p>blank check, etc.  </p>
<p></p>
<p> </p>
<p>In  the  interrupt  mode  of  FLS,  the  parameter  FlsTimeOutCountValue </p>
<p>shall be configured to directly specify the timeout count value required </p>
<p>for erase, write and blank check operations. </p>
<p></p>
<p> </p>
<p>Fls_MainFunction is crucial for timeout supervision. The call frequency </p>
<p>of  Fls_MainFunction  shall  be  handled  properly  in  the  upper  layer </p>
<p>software to be in line with the FLS module configuration. </p>
<p>Note: since read, read immediate, compare operations are not supported </p>
<p>in FLS interrupt mode, only the parameter FlsCallCycle is used to calculate </p>
<p>timeout count values for them irrespective of interrupt or polling mode. For </p>
<p>write,  erase,  blank check operations, FlsCallCycle  is used  in the polling </p>
<p>mode of FLS, while FlsTimeOutCountValue is used in the interrupt mode </p>
<p>of FLS.  </p>
<p>In FlsGeneral container the configuration parameter FlsLoopCount is used </p>
<p>to avoid the risk of endless loops in the FLS driver. FlsLoopCount is always </p>
<p>used in the implementation, hence it is not dependent on the parameter </p>
<p>FlsTimeoutMonitoring </p>
<p> </p>
<p><b>4.2. </b></p>
<p><b>Preconditions </b></p>
<p>Following preconditions have to be adhered by the user, for proper </p>
<p>functioning of the FLS Driver Component: </p>
<p> </p>
<p><b>FLS General  </b></p>
<p>• </p>
<p>The  user  should  ensure  that  FLS  Driver  Component  API  requests  are </p>
<p>invoked  in  the  correct  and  expected  sequence  and  with  correct  input </p>
<p>arguments. </p>
<p>• </p>
<p>Correct frequency configuration is essential for Flash programming quality </p>
<p>and stability. Wrong configuration could lead to loss of data retention or </p>
<p>Flash operation fail. The limits for CPU frequency are device dependent. </p>
<p>Please refer to the respective device user manuals for correct range. If the </p>
<p>CPU  frequency  is  a  fractional  value,  round  up  the  value  to  the  nearest </p>
<p>integer. Do not change power mode (voltage or CPU clock) while FLS is </p>
<p>performing a Data Flash operation. If power mode must change the user </p>
<p>can wait until operations are no longer busy or cancel the ongoing operation </p>
<p>and reinitialize the FLS module with proper CPU frequency value. </p>
<p>• </p>
<p>In case of Flash modification operation (Erase/Write) interruption due to </p>
<p>e.g. power failure, reset etc., the electrical conditions of the affected Flash </p>
<p>range (Flash block on erase, Flash write unit on Write) get undefined. It is </p>
<p>impossible to give a statement on the read value after the interruption. </p>
<p>Thus, the resulting read value is not reliable; the electrical margin for the </p>
<p>specified data retention may not be given. In such case, erase and re-</p>
<p>write the affected Flash block(s) to ensure data integrity and retention. </p>
<p>• </p>
<p>It is not possible to modify the Code Flash in parallel to a modification of </p>
<p>the Data Flash or vice versa due to shared hardware resources. </p>
<p>• </p>
<p>Data  Flash  blocks  are  aligned  to  64  bytes  and  Data  Flash  words  are </p>
<p>aligned  to  4  bytes.  RH850  devices  also  add  alignment  restrictions  for </p>
<p>types  larger  than  8  bits.  Please  refer  to  device  hardware  manual  for </p>
<p>details. </p>
<p>• </p>
<p>Validation of input parameters is done only when the static configuration </p>
<p>parameter  FLS_DEV_ERROR_DETECT  is  enabled.  Application  should </p>
<p>ensure that the right parameters are passed while invoking the APIs when </p>
<p>FLS_DEV_ERROR_DETECT is disabled. </p>
<p>• </p>
<p>A mismatch in the version numbers will result in compilation error. Ensure </p>
<p>that the correct versions of the header and the source files are used. </p>
<p>• </p>
<p>The  files  Fls_Cfg.h,  Fls_Cbk.h  and  Fls_PBcfg.c  generated  using  FLS </p>
<p>Generation  Tool  have  to  be  linked  along  with  FLS  Driver  Component </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Forethoughts  </b></p>
<p><b>Chapter 4                                                                                                                           </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>23 </b></p>
<p>source files. </p>
<p>• </p>
<p>Values for production code Event Ids should be assigned externally by the </p>
<p>configuration of the DEM. </p>
<p>• </p>
<p>Calling FLS functions, especially Cancel/Suspend/Resume/MainFunction </p>
<p>APIs by a higher priority ISR must be prevented by upper layer to avoid </p>
<p>possible re-entrancy issue. </p>
<p>• </p>
<p>Interrupt mode supports Erase, Write, and Blank Check operations only. </p>
<p>• </p>
<p>Cancel and suspend/resume operations are not allowed in case of two </p>
<p>instances of FLS Driver Component as the effect is not evaluated. </p>
<p>• </p>
<p>All functions are not re-entrant. So, re-entrant calls of any not re-entrant </p>
<p>function must be avoided. </p>
<p>• </p>
<p>User  have  the  responsibility  to  enable  or  disable  the  critical  protection </p>
<p>using the parameter FlsCriticalSectionProtection. By enabling parameter </p>
<p>FlsCriticalSectionProtection,  Microcontroller  HW  registers  which  suffer </p>
<p>from concurrent access by multiple tasks are protected. </p>
<p>• </p>
<p>To use the FLS driver, the FCU firmware shall be stored and executed </p>
<p>from in FCURAM. And the software that reads the FCU firmware area </p>
<p>shall be placed in internal RAM. </p>
<p>• </p>
<p>Due to these preconditions, the following four private functions used in </p>
<p>Fls_Init() shall be placed in internal RAM at link time using linker derivative </p>
<p>in order to perform FLS driver initialization properly. </p>
<p>Fls_FcuCopytoRam()  </p>
<p>-  </p>
<p>size 118 Bytes, </p>
<p>Fls_FcuSwitchBFlash()  -  </p>
<p>size 46 Bytes, </p>
<p>Fls_FcuClearCache()  </p>
<p>-  </p>
<p>size 76 Bytes, </p>
<p>Fls_FcuGetFWParam()  -  </p>
<p>size 46 Bytes. </p>
<p>For the integration, the FLS driver code comes under the memory sections </p>
<p>FLS_START_SEC_PRIVATERAM_CODE </p>
<p>/ </p>
<p>FLS_STOP_SEC_PRIVATERAM_CODE shall be placed in internal RAM </p>
<p>for the execution. </p>
<p>Please refer to the FLS sample application linker script for more details. </p>
<p>• </p>
<p>As </p>
<p>the </p>
<p>atomic </p>
<p>time-out </p>
<p>monitoring </p>
<p>in </p>
<p>POLLING </p>
<p>mode </p>
<p>depends </p>
<p>FlsCallCycle parameter, which is the schedule time of Fls_MainFunction </p>
<p>call, the user should take care the configuration of that parameter as per </p>
<p>the intended cycle time of Fls_MainFunction. i.e: If there are any scenarios </p>
<p>where  Fls_MainFunction  may  be  called  with  different  cycle  time  in  the </p>
<p>same application, the user shall configure FlsCallCycle with the least cycle </p>
<p>time, otherwise it may hit early time-out error. </p>
<p> </p>
<p><b>FLS Initialization </b></p>
<p>• </p>
<p>Fls_Init function temporarily disables Code Flash. During this time, since </p>
<p>the  Code  Flash  is  not  available,  the  FLS  code  shall  be  executed  from </p>
<p>internal RAM. Please ensure that: (1) User application code execution is </p>
<p>done from other locations than Code Flash (e.g. internal RAM).  (2) No </p>
<p>access  to  Code  Flash  is  allowed,  e.g.  by  jump  to  interrupt/exception </p>
<p>functions, direct Code Flash read/execution from the CPU, DMA accesses </p>
<p>to Code Flash. </p>
<p>• </p>
<p>The  FLS  Driver  Component  needs  to  be  initialized  by  calling  Fls_Init </p>
<p>before calling any other Fls functions. </p>
<p>• </p>
<p>Fls_Init shall do verification of ECC control registers, so as to ensure ECC </p>
<p>1-bit error detection and correction, ECC 2-bit error detection are enabled </p>
<p>for data flash before initialization of FCU. If the user configurable ECC </p>
<p>check for FACI is enabled and if the verification of FACI ECC register fails, </p>
<p>DEM error FLS_E_ECC_FAILED shall be reported. </p>
<p>• </p>
<p>Fls_Init function temporarily disables Code Flash in order to copy the FCU </p>
<p>firmware and initialize FCU properly. Afterwards, Code Flash will be re-</p>
<p>enabled. When failure occurs during re-enabling Code Flash, a call-back </p>
<p>function  is  invoked  to  notify  the  upper  layer  software.  This  call-back </p>
<p>function Fls_CallSwitchBFlashErrorNotification() is declared in &quot;Fls.h&quot; as </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 4                                                                                                                          Forethoughts                                                                                                                             </b></p>
<p> </p>
<p><b>24 </b></p>
<p>user  interface,  and  shall  be  implemented  in  the  upper  layer  software. </p>
<p>Countermeasures  (e.g.  hardware  reset)  against  such  failure  shall  be </p>
<p>considered  in  the  call-back  function  implementation.  And  this  function </p>
<p>Fls_CallSwitchBFlashErrorNotification() must be properly mapped in RAM </p>
<p>and executed out of RAM in case of failure. </p>
<p> </p>
<p><b>FLS Schedule operation </b></p>
<p>• </p>
<p>The Fls_MainFunction should be invoked regularly by the Basic </p>
<p>Scheduler. Though not specified by AUTOSAR, calling </p>
<p>Fls_MainFunction by polling mechanism is also possible. Ensure that the </p>
<p>FLS Driver Component is initialized before enabling the invocation of this </p>
<p>scheduled function to avoid reporting of a DET error when enabled. </p>
<p> </p>
<p><b>FLS Write Operation </b></p>
<p>• </p>
<p>Due  to  RV40  Flash  technology,  hardware  will  implicitly  reject  the  write </p>
<p>operation  if  the  target  Flash  cells  are  not  blank  (a  kind  of  &quot;overwriting </p>
<p>guard&quot;). Writing to non-blank Flash cells will result in write error. </p>
<p>• </p>
<p>Writing the same area more than once is prohibited. To write again the </p>
<p>flash  memory  area  where  data  has  already  been  written  to,  user  shall </p>
<p>erase the corresponding area in advance. </p>
<p> </p>
<p><b>FLS Read Operation </b></p>
<p>• </p>
<p>Data Flash on RH850 devices is made with differential cells for storage. </p>
<p>This means that reading erased but  non-programmed Data Flash  areas </p>
<p>directly (bypassing FLS) will produce undefined data with a tendency to the </p>
<p>previously </p>
<p>written </p>
<p>data, </p>
<p>and </p>
<p>it </p>
<p>will </p>
<p>most </p>
<p>probably </p>
<p>cause </p>
<p>ECC </p>
<p>error </p>
<p>exceptions. To avoid this exceptions, use FLS read APIs. </p>
<p>• </p>
<p>Fls_ReadImmediate  API  should  not  be  used  to  read  blank  cells.  User </p>
<p>application shall handle the errors associated with blank cell read using </p>
<p>Fls_ReadImmediate API. </p>
<p> </p>
<p><b>FLS Blank Check Operation </b></p>
<p>• </p>
<p>A blank check pass does not confirm that it is possible to write to this word </p>
<p>(4 Bytes). Also partly written/erased words may have a blank check pass </p>
<p>but write is not allowed under this condition. A blank check fail does not </p>
<p>confirm a stable read value. Even though parts of a word are at least partly </p>
<p>written, random read data are still possible, so are ECC error indications </p>
<p>for single error corrections and double error detection. </p>
<p>• </p>
<p>Due to the above shown limitations the information which can be given by </p>
<p>Fls_BlankCheck, either passing or failing, is limited. It cannot be used to </p>
<p>determine the current state of a flash cell in a meaning full way without </p>
<p>additional information obtained by other means. The blank check should </p>
<p>only be used to confirm or check some flow status but should not be used </p>
<p>to determine if a flash cell can be read or written. FLS055 from AUTOSAR </p>
<p>Specification of Flash Driver are not fulfilled here because blank check itself </p>
<p>is not able to  identify erasure state of flash cell  which is ready for  write </p>
<p>operation. Please refer to application note document &quot;RV40F DataFlash </p>
<p>Usage&quot; for more details about blank check and usage hints </p>
<p> </p>
<p><b>FLS Cancel Operation </b></p>
<p>• </p>
<p>If  a  cancel  request  is  accepted,  during  an  on-going  write  or  erase </p>
<p>operation  and  a  previous  operation  is  already  suspended,  then  both </p>
<p>operations will be cancelled. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Forethoughts  </b></p>
<p><b>Chapter 4                                                                                                                           </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>25 </b></p>
<p><b> </b></p>
<p><b>FLS Suspend operation </b></p>
<p>• </p>
<p>Suspend operation shall not be performed in between atomic operations </p>
<p>of  the  job.  i.e.,  in  between  64  bytes  of  erase  and  4  bytes  of  write, </p>
<p>suspension </p>
<p>is </p>
<p>not </p>
<p>possible. </p>
<p>The </p>
<p>job </p>
<p>can </p>
<p>be </p>
<p>suspended </p>
<p>only </p>
<p>after </p>
<p>completion of one atomic operation. </p>
<p>• </p>
<p>When an erase job is suspended, calling a write job at the same address </p>
<p>of that of erase job and then resuming the previously suspended erase job </p>
<p>shall report DET indicating failure of erase verification. </p>
<p> </p>
<p> </p>
<p><b>4.3. </b></p>
<p><b>Data Consistency </b></p>
<p>To  support  FLS  the  reentrancy  and  interrupt  services,  the  FLS  Software </p>
<p>component will ensure the data consistency while accessing their own RAM </p>
<p>storage or hardware registers </p>
<p>The  FLS  module  will  use  below  macro  for  respective  higher  and  lower </p>
<p>version. </p>
<p> </p>
<p> </p>
<p>#define FLS_ENTER_CRITICAL_SECTION (Exclusive_Area) </p>
<p>SchM_Enter_Fls_##Exclusive_Area () </p>
<p> </p>
<p>#define FLS_EXIT_CRITICAL_SECTION (Exclusive_Area) </p>
<p>SchM_Exit_Fls_##Exclusive_Area () </p>
<p> </p>
<p> </p>
<p>The following exclusive areas along with scheduler services are used to </p>
<p>provide data integrity and register protection for shared resources: </p>
<p></p>
<p> </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p></p>
<p> </p>
<p>FLS_REGISTER_PROTECTION </p>
<p></p>
<p> </p>
<p>FLS_CODE_FLASH_DISABLED</p>
<p> </p>
<p> </p>
<p> </p>
<p>Note:  The data buffer provided by the application will not be validated </p>
<p>for data consistency. It would be the responsibility of the application to </p>
<p>ensure </p>
<p>consistency </p>
<p>of </p>
<p>the </p>
<p>flash </p>
<p>data </p>
<p>during </p>
<p>flash </p>
<p>read </p>
<p>and </p>
<p>write </p>
<p>operations. </p>
<p><b> </b></p>
<p><b>Table 4-1                 FLS Driver Protected Resources List </b></p>
<p><b>API Name </b></p>
<p><b>Exclusive Area Type</b></p>
<p> </p>
<p><b>Protected </b></p>
<p><b>Resources</b></p>
<p> </p>
<p>Fls_Init </p>
<p>FLS_REGISTER_PROTECTION </p>
<p>HW Registers: </p>
<p>FRAMMCR </p>
<p>FCURAME </p>
<p>FPCKAR </p>
<p>FLS_CODE_FLASH_DISABLED </p>
<p>Firmware storage </p>
<p>area switching is </p>
<p>protected </p>
<p>Fls_Erase </p>
<p>FLS_REGISTER_PROTECTION </p>
<p>HW Registers: </p>
<p>FSADDR </p>
<p>FEADDR </p>
<p>IMR </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p>Driver state data is </p>
<p>protected </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 4                                                                                                                          Forethoughts                                                                                                                             </b></p>
<p> </p>
<p><b>26 </b></p>
<p><b>API Name </b></p>
<p><b>Exclusive Area Type</b></p>
<p> </p>
<p><b>Protected </b></p>
<p><b>Resources</b></p>
<p> </p>
<p>Fls_Write </p>
<p>FLS_REGISTER_PROTECTION </p>
<p>HW Registers: </p>
<p>FSADDR </p>
<p>FEADDR </p>
<p>IMR </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p>Driver state data is </p>
<p>protected </p>
<p>Fls_MainFunction </p>
<p>FLS_REGISTER_PROTECTION </p>
<p>HW Registers: </p>
<p>DFERSTC </p>
<p>DFERSTR </p>
<p>DFERRINT </p>
<p>IMR </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p>Driver state data is </p>
<p>protected </p>
<p>Fls_Resume </p>
<p>FLS_REGISTER_PROTECTION </p>
<p>HW Registers: </p>
<p>DFERSTC </p>
<p>DFERSTR </p>
<p>DFERRINT </p>
<p>IMR </p>
<p>Fls_Read </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p>Driver state data is </p>
<p>protected </p>
<p>Fls_Compare </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p>Driver state data is </p>
<p>protected during </p>
<p>compare operation </p>
<p>Fls_Cancel </p>
<p>FLS_REGISTER_PROTECTION </p>
<p>HW Registers: </p>
<p>IMR </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p>Driver state data is </p>
<p>protected during </p>
<p>cancel operation </p>
<p>Fls_BlankCheck </p>
<p>FLS_REGISTER_PROTECTION </p>
<p>HW registers: </p>
<p>IMR </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p>Driver state data is </p>
<p>protected during </p>
<p>blank check </p>
<p>operation </p>
<p>Fls_ReadImmediate </p>
<p>FLS_DRIVERSTATE_DATA_PROTECTION </p>
<p>Driver state data is </p>
<p>protected during </p>
<p>read immediate </p>
<p>operation </p>
<p>FLS_FLENDNM_ISR </p>
<p>FLS_REGISTER_PROTECTION </p>
<p>IMR </p>
<p><b>                              Note</b>: The highest measured duration of a critical section is 128.537 micro seconds, </p>
<p>measured for <b>Fls_Init </b>API.  </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Forethoughts  </b></p>
<p><b>Chapter 4                                                                                                                           </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>27 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>4.4. </b></p>
<p><b>Deviation List </b></p>
<p><b>                             Table 4-2                 FLS Driver Component Deviation List </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p> </p>
<p><b>                                Description</b></p>
<p> </p>
<p><b>AUTOSAR </b></p>
<p><b>Bugzilla</b></p>
<p> </p>
<p>1.</p>
<p> </p>
<p>The fast mode parameter ‘FlsMaxWriteFastMode’  of  the </p>
<p>container  ‘FlsConfigSet is unused.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>2.</p>
<p> </p>
<p>The parameters ‘FlsAcLoadOnJobStart’ and </p>
<p>‘FlsUseInterrupts’ of the container ‘FlsGeneral’ is unused. </p>
<p>-</p>
<p> </p>
<p>3.</p>
<p> </p>
<p>The flash access routines are not placed into a separate </p>
<p>C-module like 'Fls_ac.c'.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>4.</p>
<p> </p>
<p><b>FLS140 </b>and <b>FLS141 </b>are not fulfilled, because the FLS </p>
<p>module does not load the flash access code for erase/write </p>
<p>operation to the location in RAM on job start.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>5.</p>
<p> </p>
<p>The parameters ‘FlsProtection’, FlsAcWrite’ and ‘FlsAcErase’ </p>
<p>of the container ‘FlsConfigSet’ are unused.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>6. </p>
<p>The parameters ‘FlsAcLocationErase’, ‘FlsAcLocationWrite’, </p>
<p>‘FlsAcSizeErase’ and ‘FlsAcSizeWrite’ of the container </p>
<p>‘FlsPublishedInformation’ are unused. </p>
<p>- </p>
<p>7. </p>
<p>The component will support only the on-chip flash memory. </p>
<p>External flash is not in the scope of this implementation. </p>
<p>- </p>
<p>8. </p>
<p><b>FLS272,  FLS359,  FLS360  and  FLS361 </b> from  AUTOSAR </p>
<p>Specification </p>
<p>of </p>
<p>Flash </p>
<p>Driver </p>
<p>are </p>
<p>not </p>
<p>fulfilled </p>
<p>here </p>
<p>because timeout monitoring can be configured independent </p>
<p>of DET setting. However only when both timeout monitoring </p>
<p>and DET are enabled, FLS_E_TIMEOUT will be reported in </p>
<p>case of detected timeout error. </p>
<p>- </p>
<p>9. </p>
<p>The  timeout  monitoring  can  be  configured  independent  of </p>
<p>DET setting in FLS. <b>FLS272</b>, <b>FLS359</b>, <b>FLS360</b>, <b>FLS361 </b>can </p>
<p>only be fulfilled, when both timeout monitoring and DET are </p>
<p>enabled,  i.e., </p>
<p>FLS_E_TIMEOUT </p>
<p>will  be  reported  for  the </p>
<p>respective flash operations in case of detected timeout error. </p>
<p>- </p>
<p>10. </p>
<p><b>FLS201_Conf</b></p>
<p> </p>
<p>from AUTOSAR Specification of Flash Driver </p>
<p>is  not  fulfilled  here  because  FlsSectorList  is  limited  to  one </p>
<p>sector with fixed sector size. User shall not configure multiple </p>
<p>sectors. Since data flash is a monolithic on-chip NV memory </p>
<p>with  homogeneous  block  size,  it  is  not  required  to  have </p>
<p>multiple sectors with the same sector sizes. Important is that </p>
<p>FLS driver shall support possible usage of &quot;user pool&quot; (private </p>
<p>data flash area that cannot be accessed by FLS driver). This </p>
<p>can </p>
<p>be </p>
<p>done </p>
<p>by </p>
<p>proper </p>
<p>configuration </p>
<p>of </p>
<p>FlsSectorStartaddress and FlsNumberOfSectors. </p>
<p> </p>
<p> </p>
<p>- </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 4                                                                                                                          Forethoughts                                                                                                                             </b></p>
<p> </p>
<p><b>28 </b></p>
<p> </p>
<p> </p>
<p><b>4.5. </b></p>
<p><b>User mode and supervisor mode  </b></p>
<p>The below table specifies the APIs which can run in user mode, supervisor        </p>
<p>mode or both modes </p>
<p><b>                            Table 4-3                 User mode and Supervisor mode details </b></p>
<p><b> </b></p>
<p><b>Sl. No</b></p>
<p> </p>
<p><b>API Name</b></p>
<p> </p>
<p><b>User </b></p>
<p><b>Mode</b></p>
<p> </p>
<p><b>Supervisor  </b></p>
<p><b>Mode</b></p>
<p> </p>
<p><b>Known limitation in User mode </b></p>
<p>1 </p>
<p>Fls_Init </p>
<p>- </p>
<p>x </p>
<p>The Fls_Init is failing in User mode. </p>
<p>This </p>
<p>is </p>
<p>because </p>
<p>inside </p>
<p>Fls_Init </p>
<p>function  STSR  instruction  (to  store </p>
<p>contents of system register) is called </p>
<p>for </p>
<p>storing </p>
<p>contents </p>
<p>of </p>
<p>ICCTRL </p>
<p>(instruction cache control) to system </p>
<p>register. Since the ICCTRL have the </p>
<p>access </p>
<p>permission </p>
<p>in </p>
<p>only </p>
<p>supervisor </p>
<p>mode, </p>
<p>Fls_Init </p>
<p>fails </p>
<p>in </p>
<p>user mode. </p>
<p>2 </p>
<p>Fls_Read </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>3 </p>
<p>Fls_SetMode </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>4 </p>
<p>Fls_Write </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>5 </p>
<p>Fls_Cancel </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>6 </p>
<p>Fls_GetStatus </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>7 </p>
<p>Fls_GetJobResult </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>8 </p>
<p>Fls_Erase </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>9 </p>
<p>Fls_Compare </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>10 </p>
<p>Fls_GetVersionInfo </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>11 </p>
<p>Fls_MainFunction </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>12 </p>
<p>Fls_BlankCheck </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>13 </p>
<p>Fls_ReadImmediate </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>14 </p>
<p>Fls_Suspend </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p>15 </p>
<p>Fls_Resume </p>
<p>x </p>
<p>x </p>
<p>- </p>
<p><b>          Note:</b></p>
<p><b> </b></p>
<p>Implementation of critical section is not dependent on MCAL. Hence critical </p>
<p>section is not considered to the entries for user mode in the above table. </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Architecture Details </b></p>
<p><b>Chapter 5 </b></p>
<p> </p>
<p><b>29 </b></p>
<p><b> Chapter 5 </b></p>
<p><b>Architecture Details </b></p>
<p>The FLS Software architecture is shown in the following figure. The FLS user </p>
<p>shall directly use the APIs to configure and execute the FLS conversions: </p>
<p> </p>
<p> </p>
<p>Application Layer</p>
<p> </p>
<p> </p>
<p> </p>
<p>AUTOSAR RTE</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>System  Services</p>
<p> </p>
<p> </p>
<p> </p>
<p>  On board Device Abstraction</p>
<p> </p>
<p>  </p>
<p> </p>
<p><b>FLS Dr</b></p>
<p><b>i</b></p>
<p><b>ver</b></p>
<p> </p>
<p> </p>
<p> </p>
<p>Microcontroller</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Figure 5-1 </b></p>
<p><b>FLS Driver Component Architecture </b></p>
<p> </p>
<p>The basic architecture of the FLS Driver Component is illustrated in the </p>
<p>following Figure: </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Chapter 5                                                                                                              Architecture Details                                                                                                                             </b></p>
<p> </p>
<p><b>30 </b></p>
<p> </p>
<p>Application Layer </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Figure 5-2 </b></p>
<p><b>Component Overview of FLS Driver Component </b></p>
<p> </p>
<p>The internal architecture of FLS Driver Component is shown in the above figure. </p>
<p>The  FLS  Driver  Component  Software  Component  provides  services  for  the </p>
<p>following processes: </p>
<p> </p>
<p>The FLS Driver Component is divided into the following sub modules based on </p>
<p>the functionality required: </p>
<p> </p>
<p>• </p>
<p>Initialization </p>
<p>• </p>
<p>Erasing the flash memory </p>
<p>• </p>
<p>Writing to the flash memory </p>
<p>• </p>
<p>Reading the flash memory </p>
<p>• </p>
<p>Fast Read to the application memory without performing blank check </p>
<p>• </p>
<p>Validating contents of flash memory </p>
<p>• </p>
<p>Cancellation of Request </p>
<p>• </p>
<p>Reading result and status information </p>
<p>• </p>
<p>Module version information </p>
<p>• </p>
<p>Blank check of flash memory </p>
<p>• </p>
<p>Job Processing </p>
<p>• </p>
<p>Fls_Suspend suspends the on-going job. </p>
<p>• </p>
<p>Fls_Resume performs the resume of previous suspended job. </p>
<p> </p>
<p>Fls_SetMode</p>
<p> </p>
<p>Fls_Rea</p>
<p>dImmed</p>
<p>iate </p>
<p>Fls_MainFun</p>
<p>ction</p>
<p> </p>
<p>Fls_Bla</p>
<p>nkChec</p>
<p>k </p>
<p>Fls_Erase</p>
<p> </p>
<p>Fls_Init</p>
<p> </p>
<p>Fls_GetVersion</p>
<p>Info</p>
<p> </p>
<p>Fls_Res</p>
<p>ume </p>
<p>Fls_Sus</p>
<p>pend </p>
<p>Fls_Read</p>
<p> </p>
<p>Fls_Compare</p>
<p> </p>
<p>Fls_GetJobResult </p>
<p>Fls_GetStatus</p>
<p> </p>
<p>Fls_Cancel </p>
<p> </p>
<p>Fls_Write</p>
<p> </p>
<p>Suspend</p>
<p>on-</p>
<p>going </p>
<p>flash job </p>
<p>Returns </p>
<p>version </p>
<p>informat</p>
<p>ion </p>
<p>Resumes </p>
<p>previously </p>
<p>suspended</p>
<p> </p>
<p>job</p>
<p> </p>
<p>Fls_Process</p>
<p>Read ()</p>
<p> </p>
<p>Fls_Fcu</p>
<p>Init () </p>
<p>Compare </p>
<p>bytes in </p>
<p>buffer with </p>
<p>flash </p>
<p>memory </p>
<p> </p>
<p>Fls_Initi</p>
<p>ateBlan</p>
<p>kCheckJ</p>
<p>ob () </p>
<p>Returns </p>
<p>the status/r </p>
<p>esult</p>
<p> </p>
<p>Performs the </p>
<p>job processing </p>
<p>of erase,                </p>
<p>write, read and </p>
<p>compare jobs. </p>
<p>Fls_Proces</p>
<p>sCancel () </p>
<p>Perfor</p>
<p>ms fast </p>
<p>read </p>
<p>operati</p>
<p>on. </p>
<p>Fls_Initiate</p>
<p>WriteJob () </p>
<p>Fls_Init</p>
<p>iateEra</p>
<p>seJob () </p>
<p>Sets </p>
<p>Flash </p>
<p>Driver’s </p>
<p>Operatio</p>
<p>n Mode </p>
<p>FLS Driver Layer </p>
<p>Microcontroller </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Architecture Details </b></p>
<p><b>Chapter 5 </b></p>
<p> </p>
<p><b>31 </b></p>
<p><b>Initialization </b></p>
<p> </p>
<p>The initialization sub-module provides the service for initialization of the flash   </p>
<p>driver  and  initializes  the  global  variables  used  by  the  FLS  Component.  FCU </p>
<p>initialization  API  initializes  FCU  Global  Variable  Structure  and  prepares  the </p>
<p>environment. After that firmware code is copied to the RAM and FACI frequency </p>
<p>is set. The function also resets the FCU and initialize the hardware registers to </p>
<p>default values</p>
<p>. </p>
<p> </p>
<p>The API related to this sub-module is Fls_Init. </p>
<p> </p>
<p><b>Flash Memory Erasing Module </b></p>
<p> </p>
<p>This sub-module provides the service for erasing the blocks of the flash memory.  </p>
<p>The request will be processed by the job processing function Fls_MainFunction. </p>
<p>The  First  round  of  erase  operation  is  initiated  from  within  the  API  itself.  </p>
<p>Fls_MainFunction  is  then  called  to  erase  the  remaining  requested  data  flash </p>
<p>memory blocks. The job is processed till the requested numbers of blocks are </p>
<p>erased in the flash memory. Blank Check shall be done to ensure that the blocks </p>
<p>are completely erased. </p>
<p>The API related to this sub-module is Fls_Erase. </p>
<p> </p>
<p><b>Flash Memory Reading Module </b></p>
<p> </p>
<p>This  sub-module  provides  the  service  for  reading  the  contents  of  the  flash </p>
<p>memory. </p>
<p>The </p>
<p>request </p>
<p>will </p>
<p>be </p>
<p>processed </p>
<p>by </p>
<p>the </p>
<p>job </p>
<p>processing </p>
<p>function </p>
<p>Fls_MainFunction. </p>
<p>In  this  job  processing  function,  blank  check  for  the  specified  words  shall  be </p>
<p>performed first. If the cell is blank, then the application buffer shall be filled with </p>
<p>the value specified by the parameter ‘FlsErasedValue’. If the cell is not  blank, </p>
<p>then reading of the specified words from the Flash memory shall be performed. </p>
<p>This sub-module reads the specified number of words from consecutive Flash </p>
<p>addresses  starting  at  the  specified  address  and  writes  it  into  a  buffer.  Read </p>
<p>operation </p>
<p>shall </p>
<p>be </p>
<p>initiated </p>
<p>within </p>
<p>the </p>
<p>sub-module </p>
<p>itself. </p>
<p>Single </p>
<p>cycle </p>
<p>of </p>
<p>Fls_MainFunction </p>
<p>shall </p>
<p>read </p>
<p>the </p>
<p>maximum </p>
<p>number </p>
<p>of </p>
<p>bytes </p>
<p>configured </p>
<p>depending  on  the  parameters  ‘FlsMaxReadNormalMode’  (if  default  mode  is </p>
<p>MEMIF_MODE_SLOW) </p>
<p>and </p>
<p>‘FlsMaxReadFastMode’ </p>
<p>(if </p>
<p>default </p>
<p>mode </p>
<p>is </p>
<p>MEMIF_MODE_FAST). The job is processed till the requested bytes of length </p>
<p>are copied into the application buffer. </p>
<p>The API related to this sub-module is Fls_Read. </p>
<p> </p>
<p><b>Flash Memory Writing Module </b></p>
<p> </p>
<p>This sub-module provides the service for writing to the flash memory. </p>
<p> </p>
<p>The </p>
<p>request </p>
<p>shall </p>
<p>be </p>
<p>processed </p>
<p>by </p>
<p>the </p>
<p>job </p>
<p>processing </p>
<p>function </p>
<p>Fls_MainFunction. The First round of write operation is initiated from within the </p>
<p>API itself. In this job processing function, the writing of specified number of data </p>
<p>bytes from buffer to flash memory shall be performed. The function writes the </p>
<p>specified number of words from buffer to consecutive Flash addresses starting </p>
<p>at the specified address. Single cycle of Fls_MainFunction shall write 4 bytes of </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 5                                                                                                                Architecture Details </b></p>
<p> </p>
<p><b>32 </b></p>
<p> </p>
<p>data from target buffer to flash addresses. The job is processed till the requested </p>
<p>number of bytes is written to the flash memory </p>
<p>The API related to this sub-module is Fls_Write. </p>
<p> </p>
<p><b>Flash Memory Contents Validating Module </b></p>
<p> </p>
<p> </p>
<p>This sub-module provides the service for comparing the contents of the flash </p>
<p>memory with the application buffer.  </p>
<p>The </p>
<p>request </p>
<p>shall </p>
<p>be </p>
<p>processed </p>
<p>by </p>
<p>the </p>
<p>job </p>
<p>processing </p>
<p>function </p>
<p>Fls_MainFunction. </p>
<p> </p>
<p>This sub-module shall read the defined number of words in flash and store it in </p>
<p>the temporary buffer. Then actual data in application buffer shall be compared </p>
<p>with data in temporary buffer. Here data shall be compared in terms of bytes. </p>
<p>Single  cycle  of  Fls_MainFunction  shall  read  the  data  from  the  flash  memory </p>
<p>depending  on  configuration  of  parameter  ‘FlsMaxReadNormalMode’  for  data </p>
<p>flash.  The  job  is  processed  till  the  requested  number  of  bytes  are  read  and </p>
<p>compared with the application buffer. </p>
<p> </p>
<p>The API related to this sub-module is Fls_Compare. </p>
<p> </p>
<p><b>Request Set Mode Module </b></p>
<p> </p>
<p>This sub-module sets the flash driver operation mode. </p>
<p> </p>
<p>The API related to this sub-module is Fls_SetMode. </p>
<p> </p>
<p><b>Request Cancellation Module </b></p>
<p> </p>
<p>This  sub-module  provides  the  service  for  cancelling  an  on-going  memory </p>
<p>request.  </p>
<p> </p>
<p>After </p>
<p>aborting </p>
<p>the </p>
<p>current </p>
<p>on-going </p>
<p>memory </p>
<p>operations </p>
<p>this </p>
<p>sub- </p>
<p>module </p>
<p>prepares  internal  variables  to  accept  the  next  Read/Write/Erase/  Compare </p>
<p>command.  The  cancel  request  will  be  synchronous  and  a  new  job  can  be </p>
<p>requested immediately after the return from this function. A suspended job is </p>
<p>also cancelled. </p>
<p> </p>
<p>The API related to this sub-module is Fls_Cancel. </p>
<p> </p>
<p><b>Result Reading and Status Information Providing Module </b></p>
<p> </p>
<p>This  sub-module  provides  the  services  for  getting  the  current  status  of  the </p>
<p>module  or  results  of  the  initiated  job  request  or  the  response  to  previously </p>
<p>issued command and return the current status of the current job execution. </p>
<p> </p>
<p>The APIs related to this sub-module are Fls_GetStatus, Fls_GetJobResult. </p>
<p> </p>
<p><b>Software Component Version Info Module </b></p>
<p> </p>
<p>This module provides API for reading Module Id, Vendor Id and vendor specific </p>
<p>version numbers. </p>
<p> </p>
<p>The API related to this sub-module is Fls_GetVersionInfo. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p><b> Architecture Details </b></p>
<p><b>Chapter 5 </b></p>
<p> </p>
<p><b>33 </b></p>
<p><b>Job Processing Module </b></p>
<p> </p>
<p>The command requests are always processed  by  the main function that is </p>
<p>invoked cyclically by the scheduler. This function will perform the status check </p>
<p>while processing the flash operations requests. This API derives the internal </p>
<p>driver status. Completion of the flash operation needs to be checked in order </p>
<p>to continue the reprogramming flow. A Time-out feature is available with the </p>
<p>help of time-out counter operation in this API. </p>
<p> </p>
<p>The API related to this sub-module is Fls_MainFunction. </p>
<p> </p>
<p><b>Flash Memory Blank Check Module </b></p>
<p><b> </b></p>
<p>This sub-module provides the service for performing blank check of the flash </p>
<p>memory words. The request shall be processed by the job processing function </p>
<p>Fls_MainFunction. This function  is invoked to perform the  blank check of the </p>
<p>single  word.  The  job  is  processed  till  the  requested  numbers  of  words  are </p>
<p>performed with the blank check in the flash memory. </p>
<p>The API related to this sub-module is Fls_BlankCheck. </p>
<p> </p>
<p><b>Flash Memory Fast Read Module </b></p>
<p><b> </b></p>
<p>This  sub-module  provides  the  service  for  reading  the  contents  of  the  flash </p>
<p>memory.  The  request  shall  be  processed  by  the  job  processing  function </p>
<p>Fls_MainFunction.  This  function  reads  the  specified  number  of  words  from </p>
<p>consecutive Flash addresses starting at the specified address and writes it into </p>
<p>a buffer. Single cycle of Fls_MainFunction, shall read the data from the data flash </p>
<p>memory. The data from flash memory (source address) is read to the data buffer </p>
<p>(Target address) of application without performing blank check before read. The </p>
<p>job is processed till the requested bytes of length are copied into the application </p>
<p>buffer.  </p>
<p>The API related to this sub-module is Fls_ReadImmediate. </p>
<p> </p>
<p><b>Job Suspend Module </b></p>
<p><b> </b></p>
<p>This sub-module provides the service of suspending the on-going job. The driver </p>
<p>goes into idle state after the job is suspended. Fls_Suspend is asynchronous </p>
<p>API. Fls_Suspend shall reject any unacceptable request of suspension such as </p>
<p>issuing suspend request for operations other than erase and write and if no on-</p>
<p>going job is present.  </p>
<p> </p>
<p>The API related to this sub-module is Fls_Suspend. </p>
<p> </p>
<p><b>Job Resume Module </b></p>
<p><b> </b></p>
<p>This sub-module provides the service for performing the resume of the previous </p>
<p>suspended job. Fls_Resume is synchronous API. Fls_Resume acknowledges </p>
<p>the resume request and it returns immediately. </p>
<p> </p>
<p>The API related to this sub-module is Fls_Resume. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 5                                                                                                                Architecture Details </b></p>
<p> </p>
<p><b>34 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Registers Details </b></p>
<p><b>Chapter 6 </b></p>
<p> </p>
<p><b>35 </b></p>
<p><b> Chapter 6 </b></p>
<p><b>Registers Details </b></p>
<p>This section describes the register details of FLS Driver Component. </p>
<p><b> </b></p>
<p><b>Table 6-1                 Register Details </b></p>
<p> </p>
<p><b>API Name </b></p>
<p><b>Registers </b></p>
<p><b>Used </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>8/16/32 </b></p>
<p><b>bits </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p><b> </b></p>
<p><b>Config </b></p>
<p><b>Parame</b></p>
<p><b>ter </b></p>
<p><b> </b></p>
<p><b>Macro/Variable </b></p>
<p>Fls_Init </p>
<p>FSADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulStartAddr </p>
<p>FLS_FCU_ADDR_REG_RESET </p>
<p>FEADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulEndAddr </p>
<p>FLS_FCU_ADDR_REG_RESET </p>
<p>FSTATR </p>
<p>32 </p>
<p>R </p>
<p>- </p>
<p>LulRegValue </p>
<p>LulReturnValue </p>
<p>FENTRYR </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LddMode </p>
<p>FLS_FCU_REGBIT_FENTRY_KEY </p>
<p>LusModeRegVal </p>
<p>FASTAT </p>
<p>8 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FCU_REGBIT_FASTAT_CMDL</p>
<p>K </p>
<p>FCURAME </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FCU_REGBIT_FCURAME_FC</p>
<p>RME </p>
<p>FLS_FCU_REGBIT_FCURAME_KEY </p>
<p>FLS_FCU_REGBIT_FCURAME_RE</p>
<p>SET </p>
<p>FLS_FCU_REGBIT_FCURAME_FRA</p>
<p>MTRAN </p>
<p>FPCKAR </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FCU_REGBIT_FPCKAR_KEY </p>
<p>LusFaciFreq </p>
<p>FRTEINT </p>
<p>8 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FACI_FRTEINT_RESET_VAL </p>
<p>FCUFAREA </p>
<p>8 </p>
<p>RW </p>
<p>- </p>
<p>LucModeVal </p>
<p>ICCTRL </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FCU_SYSTEM_REGISTER_IC</p>
<p>CTRL </p>
<p>CDBCR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FCU_SYSTEM_REGISTER_CD</p>
<p>BCR </p>
<p>DFECCCTL </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>FLS_DFECCCTL_RESET_VAL </p>
<p>DFERRINT </p>
<p>8 </p>
<p>RW </p>
<p>- </p>
<p>FLS_ DFERRINT _RESET_VAL </p>
<p>DFTSTCTL </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>FLS_  DFTSTCTL _RESET_VAL </p>
<p>FHVE3 </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FLASH_PROTECTION_OFF </p>
<p>FLS_FLASH_PROTECTION_ON</p>
<p> </p>
<p>FHVE15 </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FLASH_PROTECTION_OFF </p>
<p>FLS_FLASH_PROTECTION_ON</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 6                                                                                                                       Registers Details </b></p>
<p> </p>
<p><b>36 </b></p>
<p> </p>
<p> </p>
<p><b>API Name </b></p>
<p><b>Registers </b></p>
<p><b>Used </b></p>
<p><b>Registe</b></p>
<p><b>r </b></p>
<p><b>Access </b></p>
<p><b>8/16/32 </b></p>
<p><b>bits </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p><b> </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b> </b></p>
<p><b>Macro/Variable </b></p>
<p>Fls_Erase, </p>
<p>Fls_MainFunction, </p>
<p>Fls_Resume </p>
<p>FSADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulCurrentStartAddr </p>
<p>FLS_FCU_ADDR_REG_RESET </p>
<p>LulStartAddr </p>
<p>FEADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulCurrentEndAddr </p>
<p>FLS_FCU_ADDR_REG_RESET  </p>
<p>LulEndAddr </p>
<p>FSTATR </p>
<p>32 </p>
<p>R </p>
<p>- </p>
<p>LulRegValue LulReturnValue </p>
<p>FENTRYR </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LddMode </p>
<p>FLS_FCU_REGBIT_FENTRY_KEY </p>
<p>LusModeRegVal </p>
<p>ICFLENDNM </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LusRegvalue </p>
<p>IMRn </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>pFlEndImrAddress, </p>
<p>usFlEndImrMask </p>
<p>FHVE3 </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FLASH_PROTECTION_OFF </p>
<p>FLS_FLASH_PROTECTION_ON</p>
<p> </p>
<p>FHVE15 </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FLASH_PROTECTION_OFF </p>
<p>FLS_FLASH_PROTECTION_ON</p>
<p> </p>
<p>Fls_Write, </p>
<p>Fls_MainFunction, </p>
<p>Fls_Resume </p>
<p>FSADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulCurrentStartAddr </p>
<p>FLS_FCU_ADDR_REG_RESET </p>
<p>FEADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulCurrentStartAddr +                                           </p>
<p>FLS_FCU_WRITE_SIZE) - </p>
<p>FLS_FCU_ONE </p>
<p>FLS_FCU_ADDR_REG_RESET </p>
<p>FSTATR </p>
<p>32 </p>
<p>R </p>
<p>- </p>
<p>LulRegValue </p>
<p>LulReturnValue </p>
<p>FENTRYR </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LddMode </p>
<p>FLS_FCU_REGBIT_FENTRY_KEY </p>
<p>LusModeRegVal </p>
<p>ICFLENDNM </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LusRegvalue </p>
<p>IMRn </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>pFlEndImrAddress, </p>
<p>usFlEndImrMask </p>
<p>FHVE3 </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FLASH_PROTECTION_OFF </p>
<p>FLS_FLASH_PROTECTION_ON</p>
<p> </p>
<p>FHVE15 </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FLASH_PROTECTION_OFF </p>
<p>FLS_FLASH_PROTECTION_ON</p>
<p> </p>
<p>Fls_Cancel </p>
<p>FENTRYR </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LddMode </p>
<p>FLS_FCU_REGBIT_FENTRY_KEY </p>
<p>LusModeRegVal </p>
<p>FASTAT </p>
<p>8 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FCU_REGBIT_FASTAT_CMDLK </p>
<p>FSTATR </p>
<p>32 </p>
<p>R </p>
<p>- </p>
<p>LulReturnValue </p>
<p>ICFLENDNM </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LusRegvalue </p>
<p>IMRn </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>pFlEndImrAddress, </p>
<p>usFlEndImrMask </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Registers Details </b></p>
<p><b>Chapter 6 </b></p>
<p> </p>
<p><b>37 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>API Name </b></p>
<p><b>Registers </b></p>
<p><b>Used </b></p>
<p><b>Registe</b></p>
<p><b>r </b></p>
<p><b>Access </b></p>
<p><b>8/16/32 </b></p>
<p><b>bits </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p><b> </b></p>
<p><b>Config </b></p>
<p><b>Parame</b></p>
<p><b>ter </b></p>
<p><b> </b></p>
<p><b>Macro/Variable </b></p>
<p>Fls_Read, </p>
<p>Fls_MainFunction, </p>
<p>Fls_Resume </p>
<p>FSADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulStartAddr </p>
<p>FLS_FCU_ADDR_REG_RESET  </p>
<p>FEADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulEndAddr </p>
<p>FLS_FCU_ADDR_REG_RESET  </p>
<p>DFERSTC </p>
<p>8 </p>
<p>W </p>
<p>- </p>
<p>FLS_FCU_REGBIT_DFERSTC_ER</p>
<p>RCLR </p>
<p>DFERRINT </p>
<p>8 </p>
<p>RW </p>
<p>- </p>
<p>LucRegValue </p>
<p>FLS_FCU_REGVAL_DFERRINT_N</p>
<p>OINT </p>
<p>DFERSTR </p>
<p>8 </p>
<p>R </p>
<p>- </p>
<p>LulErrorRegValue </p>
<p>FSTATR </p>
<p>32 </p>
<p>R </p>
<p>- </p>
<p>LulReturnValue </p>
<p>LulRegValue </p>
<p>ICFLENDNM </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LusRegvalue </p>
<p>FBCSTAT </p>
<p>8 </p>
<p>R </p>
<p>- </p>
<p>LulRegValue </p>
<p>FENTRYR </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LddMode </p>
<p>FLS_FCU_REGBIT_FENTRY_KEY </p>
<p>LusModeRegVal </p>
<p>Fls_ReadImmedia</p>
<p>te, </p>
<p>Fls_MainFunction </p>
<p> </p>
<p> </p>
<p> </p>
<p>DFERSTC </p>
<p>8 </p>
<p>W </p>
<p>- </p>
<p>FLS_FCU_REGBIT_DFERSTC_ER</p>
<p>RCLR </p>
<p>DFERRINT </p>
<p>8 </p>
<p>RW </p>
<p>- </p>
<p>LucDFERRInt </p>
<p>FLS_FCU_REGVAL_DFERRINT_N</p>
<p>OINT </p>
<p>DFERSTR </p>
<p>8 </p>
<p>R </p>
<p>- </p>
<p>LulDFERStatus </p>
<p>Fls_Compare, </p>
<p>Fls_MainFunction </p>
<p>DFERSTC </p>
<p>8 </p>
<p>W </p>
<p>- </p>
<p>FLS_FCU_REGBIT_DFERSTC_ER</p>
<p>RCLR </p>
<p>DFERRINT </p>
<p>8 </p>
<p>RW </p>
<p>- </p>
<p>LucRegValue </p>
<p>FLS_FCU_REGVAL_DFERRINT_N</p>
<p>OINT </p>
<p>DFERSTR </p>
<p>8 </p>
<p>R </p>
<p>- </p>
<p>LulErrorRegValue </p>
<p>ICFLENDNM </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LusRegvalue </p>
<p>Fls_BlankCheck, </p>
<p>Fls_MainFunction </p>
<p>Fls_Resume </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>FSADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulStartAddr </p>
<p>FEADDR </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>LulEndAddr </p>
<p>FSTATR </p>
<p>32 </p>
<p>R </p>
<p>- </p>
<p>LulReturnValue </p>
<p>LulRegValue </p>
<p>FBCSTAT </p>
<p>8 </p>
<p>R </p>
<p>- </p>
<p>LulRegValue </p>
<p>FENTRYR </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LddMode </p>
<p>FLS_FCU_REGBIT_FENTRY_KEY </p>
<p>LusModeRegVal </p>
<p>ICFLENDNM </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>LusRegvalue </p>
<p>IMRn </p>
<p>16 </p>
<p>RW </p>
<p>- </p>
<p>pFlEndImrAddress, </p>
<p>usFlEndImrMask </p>
<p>FHVE3 </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FLASH_PROTECTION_OFF </p>
<p>FLS_FLASH_PROTECTION_ON</p>
<p> </p>
<p>FHVE15 </p>
<p>32 </p>
<p>RW </p>
<p>- </p>
<p>FLS_FLASH_PROTECTION_OFF </p>
<p>FLS_FLASH_PROTECTION_ON</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 6                                                                                                                       Registers Details </b></p>
<p> </p>
<p><b>38 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>API Name </b></p>
<p><b>Registers </b></p>
<p><b>Used </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>8/16/32 </b></p>
<p><b>bits </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p><b> </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b> </b></p>
<p><b>Macro/Variable </b></p>
<p>Fls_GetStatus </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Fls_GetJobResult </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Fls_Suspend </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Fls_GetVersionInfo </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>- </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Interaction between the User and FLS Driver Component </b></p>
<p><b>Chapter 7 </b></p>
<p> </p>
<p><b>39 </b></p>
<p> </p>
<p><b> Chapter 7 </b></p>
<p><b>Interaction between the User and FLS </b></p>
<p><b>Driver Component </b></p>
<p> </p>
<p>The  details  of  the  services  supported  by  the  FLS  Driver  Component  to  the    </p>
<p>upper layers users and the mapping of the channels to the hardware units is </p>
<p>provided in the following sections: </p>
<p> </p>
<p><b>7.1. </b></p>
<p><b>Services Provided by FLS Driver Component to the </b></p>
<p><b>User </b></p>
<p> </p>
<p>The FLS Driver Component provides the following functions to upper layers: </p>
<p> </p>
<p>• </p>
<p>Writing contents to data flash memory </p>
<p>• </p>
<p>Erase flash memory sectors </p>
<p>• </p>
<p>Read flash contents to the application memory </p>
<p>• </p>
<p>Fast Read to the application memory without performing blank check </p>
<p>• </p>
<p>Validate flash contents comparing with the application memory </p>
<p>• </p>
<p>Cancel the on-going erase, write, read or compare requests. </p>
<p>• </p>
<p>Read the result of the last job </p>
<p>• </p>
<p>Blank check of flash memory </p>
<p>• </p>
<p>Read the status of the FLS Driver Component. </p>
<p>• </p>
<p>Fls_Suspend suspends the on-going job. </p>
<p>• </p>
<p>Fls_Resume performs the resume of previous suspended job. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> Caution: </p>
<p> </p>
<p>• </p>
<p>If other software components in BSW are accessing data flash or FACI </p>
<p>registers, then the synchronization between FLS and other software </p>
<p>components shall be handled by user application to ensure data </p>
<p>consistency. </p>
<p> </p>
<p>• </p>
<p>Please pay attention that many FLS APIs are non-reentrant. This means it </p>
<p>is not allowed to call a non-reentrant API function from a different program </p>
<p>context (e.g. interrupt service routines, other threads) while another or the </p>
<p>same non-reentrant API function is already running. </p>
<p>In particular, when calling Fls_MainFunction, user application shall avoid </p>
<p>collision with other non-reentrant FLS APIs.</p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 7                                                Interaction between the User and FLS Driver Component </b></p>
<p> </p>
<p><b>40 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  FLS Driver Component Header and Source File Description </b></p>
<p><b>Chapter 8 </b></p>
<p> </p>
<p><b>41 </b></p>
<p><b>Chapter 8  FLS Driver Component Header and Source </b></p>
<p><b>File Description </b></p>
<p> </p>
<p>This section explains the FLS Driver Component’s C Source and C Header files. </p>
<p>These files have to be included in the project application while integrating with </p>
<p>other modules. </p>
<p> </p>
<p>The C header file generated by FLS Driver Code Generation Tool:  </p>
<p> </p>
<p>• </p>
<p>Fls_Cbk.h </p>
<p>• </p>
<p>Fls_Cfg.h </p>
<p> </p>
<p>                                         The C source file generated by FLS Driver Code Generation Tool:  </p>
<p> </p>
<p>• </p>
<p>Fls_PBcfg.c </p>
<p> </p>
<p>The FLS Driver Component C header files: </p>
<p>• </p>
<p>Fls.h </p>
<p>• </p>
<p>Fls_Debug.h </p>
<p>• </p>
<p>Fls_Internal.h </p>
<p>• </p>
<p>Fls_Types.h </p>
<p>• </p>
<p>Fls_PBTypes.h </p>
<p>• </p>
<p>Fls_Version.h </p>
<p>• </p>
<p>Fls_Ram.h </p>
<p>• </p>
<p>Fls_Private_Fcu.h </p>
<p>• </p>
<p>Fls_Irq.h </p>
<p>• </p>
<p>Fls_RegWrite.h </p>
<p> </p>
<p>The FLS Driver Component source files: </p>
<p>• </p>
<p>Fls.c </p>
<p>• </p>
<p>Fls_Internal.c </p>
<p>• </p>
<p>Fls_Ram.c </p>
<p>• </p>
<p>Fls_Private_Fcu.c </p>
<p>• </p>
<p>Fls_Version.c </p>
<p>• </p>
<p>Fls_Irq.c </p>
<p> </p>
<p>The Stub C header files: </p>
<p>• </p>
<p>Compiler.h </p>
<p>• </p>
<p>Compiler_Cfg.h </p>
<p>• </p>
<p>MemMap.h </p>
<p>• </p>
<p>Platform_Types.h </p>
<p>• </p>
<p>rh850_Types.h </p>
<p>• </p>
<p>Dem.h </p>
<p>• </p>
<p>Dem_Cfg.h </p>
<p>• </p>
<p>Det.h </p>
<p>• </p>
<p>MemIf.h </p>
<p>• </p>
<p>MemIf_Types.h </p>
<p>• </p>
<p>Os.h </p>
<p>• </p>
<p>Rte.h </p>
<p>• </p>
<p>Std_Types.h </p>
<p>• </p>
<p>SchM_Fls.h </p>
<p> </p>
<p> </p>
<p>The description of the FLS Driver Component files is provided in the table </p>
<p>below: </p>
<p> </p>
<p> </p>
<p><b>                                            </b></p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 8                                             FLS Driver Component Header and Source File Description </b></p>
<p> </p>
<p><b>42 </b></p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>                       Table 8-1                 Description of the FLS Driver Component Files </b></p>
<p> </p>
<p><b>File</b></p>
<p> </p>
<p><b>Details</b></p>
<p> </p>
<p>Fls_Cfg.h </p>
<p>This file is generated by the Renesas Unified Code Generator Tool for </p>
<p>various FLS Driver Component pre-compile time parameters.  The macros </p>
<p>and the parameters generated will vary with respect to the configuration in </p>
<p>the input ECU Configuration description file. This file also contains the </p>
<p>handles for Fls Pin configuration set. </p>
<p>Fls_Cbk.h </p>
<p>This file contains declarations of notification functions to be used by the </p>
<p>application. The notification function name can be configured. </p>
<p>Fls_PBcfg.c </p>
<p>This file contains post-build configuration data. The structures </p>
<p>related to FLS Initialization are provided in this file. Data structures </p>
<p>will vary with respect to parameters configured. </p>
<p>Fls.h </p>
<p>This file provides extern declarations for all the FLS Driver Component APIs. </p>
<p>This file provides service Ids of APIs, DET Error codes and type definitions </p>
<p>for FLS Software initialization structure. This header file shall be included in </p>
<p>other modules to use the features of FLS Driver Component. </p>
<p>Fls_Debug.h </p>
<p>This file provides Provision of global variables for debugging purpose. </p>
<p>Fls_Internal.h </p>
<p>This file contains the declarations of the internally used functions. </p>
<p>Fls_Types.h </p>
<p>This file contains the common macro definitions and the data types </p>
<p>required internally by the FLS software component. </p>
<p>Fls_Ram.h </p>
<p>This file contains the extern declarations for the global variables that are </p>
<p>defined in Fls_Ram.c file and the version information of the file. </p>
<p>Fls_Version.h </p>
<p>This file contains the macros of AUTOSAR version numbers of all modules </p>
<p>that are interfaced to FLS. </p>
<p>Fls_Irq.h </p>
<p>This file contains the external declaration for the interrupt functions used </p>
<p>by FLS Driver Module. </p>
<p>Fls_Private_Fcu.h </p>
<p> </p>
<p>This file contains API Declarations of Flash Control Unit specific functions </p>
<p>Fls_RegWrite.h </p>
<p>This file is to have macro definitions for the registers write and verification. </p>
<p>Fls.c </p>
<p>This file contains the implementation of all APIs. </p>
<p>Fls_Ram.c </p>
<p>This file contains the global variables used by FLS Driver Component. </p>
<p>Fls_Private_Fcu.c </p>
<p>This file contains FCU related API implementations </p>
<p>Fls_Internal.c </p>
<p>This file contains the definition of the internal functions that access the </p>
<p>hardware registers. </p>
<p>Fls_Version.c </p>
<p>This file contains the code for checking version of all modules that are </p>
<p>interfaced to FLS. </p>
<p>Fls_Irq.c </p>
<p>This file contains the implementation of all the interrupt functions used by </p>
<p>FLS Driver Module. </p>
<p>Compiler.h </p>
<p>Provides compiler specific (non-ANSI) keywords. All mappings of keywords, </p>
<p>which  are  not  standardized, </p>
<p>and/or </p>
<p>compiler  specific </p>
<p>are </p>
<p>placed </p>
<p>and </p>
<p>organized in this compiler specific header. </p>
<p>Compiler_Cfg.h </p>
<p>This file contains the memory and pointer classes. </p>
<p>MemMap.h </p>
<p>This file allows to map variables, constants and code of modules to </p>
<p>individual memory sections. Memory mapping can be modified as per ECU </p>
<p>specific needs. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  FLS Driver Component Header and Source File Description </b></p>
<p><b>Chapter 8 </b></p>
<p> </p>
<p><b>43 </b></p>
<p><b>File</b></p>
<p> </p>
<p><b>Details</b></p>
<p> </p>
<p>Platform_Types.h </p>
<p>This file provides provision for defining platform and compiler dependent </p>
<p>types. </p>
<p>Fls_PBTypes.h </p>
<p>This file contains the type definitions of post build parameters. It also </p>
<p>contains the macros used by the FLS Driver Component. </p>
<p>rh850_Types.h </p>
<p>This file provides macros to perform supervisor mode (SV) write enabled </p>
<p>Register ICxxx and IMR register writing using OR/AND/Direct operation. </p>
<p>Dem.h </p>
<p>This file is a stub for DEM Component. </p>
<p>Dem_Cfg.h </p>
<p>This is a stub file used for defining dem event parameters used in the </p>
<p>configuration. </p>
<p>Det.h </p>
<p>This file is a stub for DET Component. </p>
<p>MemIf.h </p>
<p>This file is a stub for MEMIF Module. </p>
<p>MemIf_Types.h </p>
<p>This file is a stub for MemIf component. </p>
<p>Os.h </p>
<p>This file is a stub for Os Component. </p>
<p>Rte.h </p>
<p>This file is a stub for Rte Component. </p>
<p>Std_Types.h </p>
<p>This file is a stub file which contains the standard type definitions. </p>
<p>SchM_Fls.h </p>
<p>This file is a stub file which is used to get the support of critical section </p>
<p>protection. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 8                                             FLS Driver Component Header and Source File Description </b></p>
<p> </p>
<p><b>44 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Generation Tool Guide </b></p>
<p><b>Chapter 9</b></p>
<p> </p>
<p> </p>
<p><b>45 </b></p>
<p><b>Chapter 9 </b></p>
<p><b>Generation Tool Guide </b></p>
<p>For information on the FLS Driver Code Generation Tool, please refer </p>
<p>“R20UT3711EJ0101-AUTOSAR.pdf” document. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 9                                                                                                                              Generation Tool Guide</b></p>
<p> </p>
<p><b>46 </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Application Programming Interface </b></p>
<p><b>Chapter 10 </b></p>
<p> </p>
<p><b>47 </b></p>
<p><b>Chapter 10 </b></p>
<p><b>Application Programming Interface </b></p>
<p>This section explains the Data types and APIs provided by the </p>
<p>FLS Driver </p>
<p>Component </p>
<p>to the Upper layers. </p>
<p> </p>
<p><b>10.1.  Imported Types </b></p>
<p> </p>
<p>This section explains the Data types imported by the FLS Driver Component </p>
<p>and lists its dependency on other modules. </p>
<p> </p>
<p><b>10.1.1. </b></p>
<p><b>Standard Types </b></p>
<p>In this section all types included from the Std_Types.h are listed: </p>
<p>• </p>
<p>Std_ReturnType </p>
<p>• </p>
<p>Std_VersionInfoType </p>
<p> </p>
<p><b>10.1.2. </b></p>
<p><b>Other Module Types </b></p>
<p>In this section all types included from the Dem.h and MemIf_Types.h are listed. </p>
<p>• </p>
<p>Dem_EventIdType </p>
<p>• </p>
<p>Dem_EventStatusType </p>
<p>• </p>
<p>Memif_JobResultType </p>
<p>• </p>
<p>Memif_StatusType </p>
<p>• </p>
<p>MemIf_ModeType </p>
<p> </p>
<p><b>10.2. </b></p>
<p><b>Type Definitions </b></p>
<p> </p>
<p>This section explains the type definitions of FLS Driver Component according </p>
<p>to AUTOSAR Specification </p>
<p> </p>
<p><b>10.2.1 </b></p>
<p><b>Fls_ConfigType </b></p>
<p> </p>
<p><b>                         Table 10-1               Fls_ConfigType </b></p>
<p><b> </b></p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_ConfigType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>Structure</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Name</b></p>
<p> </p>
<p><b>Explanation</b></p>
<p> </p>
<p>unit32</p>
<p> </p>
<p>ulStartOfDbToc</p>
<p> </p>
<p>Database start value</p>
<p> </p>
<p>void*</p>
<p> </p>
<p>pJobEndNotificationPointer</p>
<p> </p>
<p>Pointer to job end </p>
<p>callback notification</p>
<p> </p>
<p>void* </p>
<p>pJobErrorNotificationPointer </p>
<p>Pointer to job error </p>
<p>callback notification </p>
<p>void*</p>
<p> </p>
<p>pEccSEDNotificationPointer</p>
<p> </p>
<p>Pointer to ECC SED </p>
<p>callback notification</p>
<p> </p>
<p>void*</p>
<p> </p>
<p>pEccDEDNotificationPointer</p>
<p> </p>
<p>Pointer to ECC DED </p>
<p>callback notification</p>
<p> </p>
<p>uint32</p>
<p> </p>
<p>ulFlsSlowModeMaxReadBytes</p>
<p> </p>
<p>Maximum number of </p>
<p>Read bytes in Normal </p>
<p>Mode</p>
<p> </p>
<p>uint32</p>
<p> </p>
<p>ulFlsFastModeMaxReadBytes</p>
<p> </p>
<p>Maximum number of </p>
<p>Read bytes in fast </p>
<p>Mode</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p> </p>
<p><b>48 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>uint16*</p>
<p> </p>
<p>pFlEndImrAddress</p>
<p> </p>
<p>Address for error </p>
<p>IMR registers</p>
<p> </p>
<p>uint16</p>
<p> </p>
<p>usFlEndImrMask</p>
<p> </p>
<p>Mask for IMR </p>
<p>register</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Element:</b></p>
<p> </p>
<p>volatile Fls_FACIRegType </p>
<p>pFACIRegPtr </p>
<p>Base Address for </p>
<p>FACI Registers </p>
<p>volatile Fls_ECCRegType </p>
<p>pECCRegPtr </p>
<p>Base Address for </p>
<p>ECC Registers </p>
<p>MemIfModeType </p>
<p>ddDefaultMode </p>
<p>Default Mode value </p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Structure to hold the flash driver configuration set. The contents of the initialisation data </p>
<p>structure are specific to the flash memory hardware  </p>
<p> </p>
<p><b> </b></p>
<p> </p>
<p><b>10.2.2 </b></p>
<p><b>Fls_AddressType </b></p>
<p> </p>
<p> </p>
<p><b>                        Table 10-2               Fls_AddressType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_AddressType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint</p>
<p> </p>
<p><b> Range:</b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>8/16/32 bits</p>
<p> </p>
<p>Size depends on target platform and flash </p>
<p>device.  </p>
<p> </p>
<p><b> Description: </b></p>
<p>Used as address offset from the configured flash base address to access a certain </p>
<p>flash memory area.  </p>
<p> </p>
<p> </p>
<p><b>10.2.3 </b></p>
<p><b>Fls_LengthType </b></p>
<p><b> </b></p>
<p><b>                         Table 10-3               Fls_LengthType </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_LengthType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint</p>
<p> </p>
<p><b> Range:</b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Same as Fls_AddressType</p>
<p> </p>
<p>Shall be the same type as </p>
<p>Fls_AddressType because of arithmetic </p>
<p>operations. Size depends on target </p>
<p>platform and flash device.  </p>
<p> </p>
<p><b> Description: </b></p>
<p>Specifies the number of bytes to read/write/erase/compare.  </p>
<p> </p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b>10.3. </b></p>
<p><b>Function Definitions </b></p>
<p><b> </b></p>
<p><b>                             Table 10-4               API Provided by FLS Driver Component </b></p>
<p> </p>
<p> </p>
<p><b>Sl. No</b></p>
<p> </p>
<p><b>API’s name</b></p>
<p> </p>
<p> </p>
<p>1.</p>
<p> </p>
<p>Fls_Init</p>
<p> </p>
<p>2.</p>
<p> </p>
<p>Fls_Erase</p>
<p> </p>
<p>3.</p>
<p> </p>
<p>Fls_Write</p>
<p> </p>
<p>4.</p>
<p> </p>
<p>Fls_Cancel</p>
<p> </p>
<p>5.</p>
<p> </p>
<p>Fls_GetStatus</p>
<p> </p>
<p>6.</p>
<p> </p>
<p>Fls_GetJobResult</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Application Programming Interface </b></p>
<p><b>Chapter 10 </b></p>
<p> </p>
<p><b>49 </b></p>
<p> </p>
<p><b>Sl. No</b></p>
<p> </p>
<p><b>API’s name</b></p>
<p> </p>
<p> </p>
<p>7.</p>
<p> </p>
<p>Fls_Read</p>
<p> </p>
<p>8.</p>
<p> </p>
<p>Fls_Compare</p>
<p> </p>
<p>9.</p>
<p> </p>
<p>Fls_SetMode</p>
<p> </p>
<p>10.</p>
<p> </p>
<p>Fls_GetVersionInfo</p>
<p> </p>
<p>11.</p>
<p> </p>
<p>Fls_MainFunction</p>
<p> </p>
<p>12. </p>
<p>Fls_BlankCheck </p>
<p>13. </p>
<p>Fls_ReadImmediate </p>
<p>14. </p>
<p>Fls_Suspend </p>
<p>15. </p>
<p>Fls_Resume </p>
<p> </p>
<p><b>10.3.1. </b></p>
<p><b>Fls_Init </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_Init</p>
<p> </p>
<p> </p>
<p><b> Prototype:  </b></p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(void, FLS_PUBLIC_CODE) Fls_Init(P2CONST(Fls_ConfigType, </p>
<p>AUTOMATIC, FLS_APPL_CONST) ConfigPtr) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x00</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Synchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>Fls_ConfigType</p>
<p> </p>
<p>ConfigPtr </p>
<p>NA </p>
<p><b>  Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>void</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>This service performs initialization of the FLS Driver component. </p>
<p> </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.2. </b></p>
<p><b>Fls_Erase </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_Erase</p>
<p> </p>
<p> </p>
<p>  </p>
<p><b> Prototype:  </b></p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(Std_ReturnType, FLS_PUBLIC_CODE) Fls_Erase (Fls_AddressType </p>
<p>TargetAddress, Fls_LengthType Length) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x01</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Asynchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p> </p>
<p><b>50 </b></p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p>Fls_AddressType</p>
<p> </p>
<p>TargetAddress </p>
<p>Target address in flash memory. This </p>
<p>address offset will be added to the flash </p>
<p>memory base address.  </p>
<p>Min.: 0  </p>
<p>Max.: FLS_SIZE - 1  </p>
<p>Fls_LengthType </p>
<p>Length </p>
<p>Number of bytes to erase  </p>
<p>Min.: 1  </p>
<p>Max.: FLS_SIZE - TargetAddress </p>
<p><b> Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>Std_ReturnType</p>
<p> </p>
<p>E_OK: If Erase command has been accepted. </p>
<p>E_NOT_OK: If Erase command has not been accepted.</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>This API will erase the one or more complete flash sectors. </p>
<p> </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.3. </b></p>
<p><b>Fls_Write </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_Write</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(Std_ReturnType, FLS_PUBLIC_CODE) Fls_Write(Fls_AddressType </p>
<p>TargetAddress,P2CONST(uint8, AUTOMATIC, FLS_APPL_CONST) </p>
<p>SourceAddressPtr, Fls_LengthType Length) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x02</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Asynchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>Fls_AddressType</p>
<p> </p>
<p>TargetAddress </p>
<p>Target address in flash memory. This address </p>
<p>offset will be added to the flash memory base </p>
<p>address.  </p>
<p>Min.: 0  </p>
<p>Max.: FLS_SIZE - 1 </p>
<p> uint8 </p>
<p>SourceAddressPtr </p>
<p>Pointer to source data buffer </p>
<p>Fls_LengthType </p>
<p>Length </p>
<p>Number of bytes to write  </p>
<p>Min.: 1  </p>
<p>Max.: FLS_SIZE - TargetAddress </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>Std_ReturnType</p>
<p> </p>
<p>E_OK: write command has been accepted  </p>
<p>E_NOT_OK: write command has not been accepted</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Writes one or more complete flash pages</p>
<p> </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Application Programming Interface </b></p>
<p><b>Chapter 10 </b></p>
<p> </p>
<p><b>51 </b></p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.4. </b></p>
<p><b>Fls_Cancel </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_Cancel</p>
<p> </p>
<p><b>Prototype:</b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(void, FLS_PUBLIC_CODE) Fls_Cancel(void) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x03</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>synchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Cancel an ongoing flash read, write, erase or compare job. </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.5. </b></p>
<p><b>Fls_GetStatus </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_GetStatus</p>
<p> </p>
<p> </p>
<p><b>Prototype:  </b></p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(MemIf_StatusType, FLS_PUBLIC_CODE) Fls_GetStatus(void) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x04</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>synchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>MemIf_StatusType</p>
<p> </p>
<p>Type definition for MEMIF status types   </p>
<p>MEMIF_UNINIT,  </p>
<p>MEMIF_IDLE, </p>
<p>MEMIF_BUSY, </p>
<p>MEMIF_BUSY_INTERNAL.</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Return the FLS module state synchronously</p>
<p> </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p> </p>
<p><b>52 </b></p>
<p> </p>
<p><b>10.3.6. </b></p>
<p><b>Fls_GetJobResult </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_GetJobResult</p>
<p> </p>
<p><b>Prototype:</b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(MemIf_JobResultType, FLS_PUBLIC_CODE) Fls_GetJobResult(void) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x05</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>synchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>MemIf_JobResultType</p>
<p> </p>
<p>Type definition for MEMIF job result types </p>
<p>  </p>
<p>MEMIF_JOB_OK, </p>
<p>  MEMIF_JOB_FAILED, </p>
<p>  MEMIF_JOB_PENDING, </p>
<p>  MEMIF_JOB_CANCELED, </p>
<p>  MEMIF_BLOCK_INCONSISTENT, </p>
<p>  MEMIF_BLOCK_INVALID</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Return the result of the last job synchronously</p>
<p> </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.7. </b></p>
<p><b>Fls_MainFunction </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_MainFunction</p>
<p> </p>
<p><b>  Prototype:  </b></p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(void, FLS_PUBLIC_CODE) Fls_MainFunction(void) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x06</p>
<p> </p>
<p><b>Timing: </b></p>
<p>FIXED_CYCLIC </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Performs the processing of jobs.</p>
<p> </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Application Programming Interface </b></p>
<p><b>Chapter 10 </b></p>
<p> </p>
<p><b>53 </b></p>
<p><b>10.3.8. </b></p>
<p><b>Fls_Read </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_Read</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(Std_ReturnType, FLS_PUBLIC_CODE) Fls_Read(Fls_AddressType </p>
<p>SourceAddress, P2VAR(uint8, AUTOMATIC, FLS_APPL_CONST) </p>
<p>TargetAddressPtr, Fls_LengthType Length) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x07</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Asynchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>Fls_AddressType</p>
<p> </p>
<p>SourceAddress </p>
<p>Source address in flash memory. This </p>
<p>address offset will be added to the flash </p>
<p>memory base address.  </p>
<p>Min.: 0  </p>
<p>Max.: FLS_SIZE - 1 </p>
<p>Fls_LengthType </p>
<p>Length </p>
<p>Number of bytes to read  </p>
<p>Min.: 1  </p>
<p>Max.: FLS_SIZE - TargetAddress </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>uint8</p>
<p> </p>
<p>TargetAddressPtr</p>
<p> </p>
<p>Pointer to target data buffer</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>Std_ReturnType</p>
<p> </p>
<p>E_OK: read command has been accepted  </p>
<p>E_NOT_OK: read command has not been accepted</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Read from flash memory</p>
<p> </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.9. </b></p>
<p><b>Fls_Compare </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_Compare</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(Std_ReturnType, FLS_PUBLIC_CODE) Fls_Compare (Fls_AddressType </p>
<p>SourceAddress, P2CONST(uint8, AUTOMATIC, FLS_APPL_CONST) </p>
<p>TargetAddressPtr, Fls_LengthType Length) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x08</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Asynchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>Fls_AddressType</p>
<p> </p>
<p>SourceAddress </p>
<p>Source address in flash memory. This </p>
<p>address offset will be added to the flash </p>
<p>memory base address.  </p>
<p>Min.: 0  </p>
<p>Max.: FLS_SIZE - 1 </p>
<p>Fls_LengthType </p>
<p>Length </p>
<p>Number of bytes to compare  </p>
<p>Min.: 1  </p>
<p>Max.: FLS_SIZE - SourceAddress </p>
<p>uint8 </p>
<p>TargetAddressPtr </p>
<p>Pointer to target data buffer </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p> </p>
<p><b>54 </b></p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>Std_ReturnType</p>
<p> </p>
<p>E_OK: compare command has been accepted  </p>
<p>E_NOT_OK: compare command has not been accepted</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Compares the contents of an area of flash memory with that of an application data </p>
<p>buffer.</p>
<p> </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.10. </b></p>
<p><b>Fls_SetMode </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_SetMode</p>
<p> </p>
<p>  </p>
<p><b>Prototype:</b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(void, FLS_PUBLIC_CODE) Fls_SetMode(MemIf_ModeType LenMode) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x09</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Synchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>MemIf_ModeType</p>
<p> </p>
<p>Mode</p>
<p> </p>
<p>MEMIF_MODE_SLOW: Slow read access / normal </p>
<p>SPI access.  </p>
<p>MEMIF_MODE_FAST: Fast read access / SPI burst </p>
<p>access.</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Sets the flash driver’s operation mode. </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.11. </b></p>
<p><b>Fls_GetVersionInfo </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_GetVersionInfo</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(void, FLS_PUBLIC_CODE) Fls_GetVersionInfo </p>
<p>(P2VAR(Std_VersionInfoType, AUTOMATIC, FLS_APPL_DATA) versioninfo) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x10</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Synchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Application Programming Interface </b></p>
<p><b>Chapter 10 </b></p>
<p> </p>
<p><b>55 </b></p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>Std_VersionInfoType</p>
<p> </p>
<p>VersioninfoPtr</p>
<p> </p>
<p>Pointer to where to store the version </p>
<p>information of this module.</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Returns the version information of this module. </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.12. </b></p>
<p><b>Fls_ReadImmediate </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_ReadImmediate</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(Std_ReturnType, FLS_PUBLIC_CODE) Fls_ReadImmediate </p>
<p>(Fls_AddressType SourceAddress, P2VAR(uint8, AUTOMATIC, </p>
<p>FLS_APPL_CONST) TargetAddressPtr, Fls_LengthType Length) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x11</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Asynchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>Fls_AddressType</p>
<p> </p>
<p>SourceAddress </p>
<p>Source address in flash memory. This address </p>
<p>offset will be added to the flash memory base </p>
<p>address.  </p>
<p>Min.: 0  </p>
<p>Max.: FLS_SIZE - 1 </p>
<p>Fls_LengthType </p>
<p>Length </p>
<p>Number of bytes to read  </p>
<p>Min.: 1  </p>
<p>Max.: FLS_SIZE - TargetAddress </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>uint8</p>
<p> </p>
<p>TargetAddressPtr</p>
<p> </p>
<p>Pointer to target data buffer</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>Std_ReturnType</p>
<p> </p>
<p>E_OK: read command has been accepted  </p>
<p>E_NOT_OK: read command has not been accepted</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Performs the reading of the flash memory. The data from flash memory (source address) </p>
<p>is read to the data buffer (Target address) of application without performing blank check </p>
<p>before read. </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.13. </b></p>
<p><b>Fls_BlankCheck </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_BlankCheck</p>
<p> </p>
<p> </p>
<p>  </p>
<p><b>  Prototype:  </b></p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(Std_ReturnType, FLS_PUBLIC_CODE) Fls_BlankCheck </p>
<p>(Fls_AddressType TargetAddress, Fls_LengthType Length) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x12</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p> </p>
<p><b>56 </b></p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Asynchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>Fls_AddressType</p>
<p> </p>
<p>TargetAddress </p>
<p>Target address in flash memory. This address </p>
<p>offset will be added to the flash memory base </p>
<p>address.  </p>
<p>Min.: 0  </p>
<p>Max.: FLS_SIZE - 1 </p>
<p>Fls_LengthType </p>
<p>Length </p>
<p>Number of bytes to be blank checked   </p>
<p>Min.: 1  </p>
<p>Max.: FLS_SIZE - TargetAddress </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>Std_ReturnType</p>
<p> </p>
<p>E_OK: Blank check command has been accepted  </p>
<p>E_NOT_OK: Blank check command has not been accepted</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Performs the blank check of flash Memory </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.14. </b></p>
<p><b>Fls_Suspend </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_Suspend</p>
<p> </p>
<p><b> Prototype:  </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(Std_ReturnType , FLS_PUBLIC_CODE) Fls_Suspend(void) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x13</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Asynchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non Re-entrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>Std_ReturnType</p>
<p> </p>
<p>E_OK: Suspend job has been accepted  </p>
<p>E_NOT_OK: Suspend job has not been accepted</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Performs the suspension of the ongoing job </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Application Programming Interface </b></p>
<p><b>Chapter 10 </b></p>
<p> </p>
<p><b>57 </b></p>
<p><b>10.3.15. </b></p>
<p><b>Fls_Resume </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_Resume</p>
<p> </p>
<p><b> Prototype:  </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>FUNC(void, FLS_PUBLIC_CODE) Fls_Resume(void) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>0x14</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Synchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>Non-Reentrant</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>  Resumes the suspended job </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p><b>10.3.16. </b></p>
<p><b>Fls_CallSwitchBFlashErrorNotification </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Fls_CallSwitchBFlashErrorNotification</p>
<p> </p>
<p><b> Prototype:  </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Prototype:</b></p>
<p> </p>
<p>void Fls_CallSwitchBFlashErrorNotification(void) </p>
<p><b>Service ID:</b></p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Sync/Async:</b></p>
<p> </p>
<p>Synchronous</p>
<p> </p>
<p><b>Reentrancy:</b></p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Parameters In:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Parameter</b></p>
<p> </p>
<p><b>Value/Range</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters InOut:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Parameters out:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>NA</p>
<p> </p>
<p> </p>
<p><b>Return Value:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Possible Return Values</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p>NA</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>This callback function is invoked when failure occurs while re-enabling of Code Flash </p>
<p>during FCU initialization procedure. </p>
<p><b>Configuration </b></p>
<p><b>Dependency:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p><b>Preconditions:</b></p>
<p> </p>
<p>None</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p> </p>
<p><b>58 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Development and Production Errors </b></p>
<p><b>Chapter 11 </b></p>
<p> </p>
<p><b>59 </b></p>
<p><b>Chapter 11 </b></p>
<p><b>Development and Production Errors </b></p>
<p> </p>
<p> </p>
<p>In  this  section  the  development  errors  that  are  reported  by  the  FLS  Driver </p>
<p>Component are tabulated. The development errors will be reported only when </p>
<p>the pre compiler option FlsDevErrorDetect is enabled in the configuration. The </p>
<p>production code errors are not supported by FLS Driver Component. </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>11.1 </b></p>
<p><b>FLS Driver Component Development Errors </b></p>
<p>The following table contains the DET errors that are reported by FLS Driver </p>
<p>Component. These errors are reported to Development Error Tracer Module </p>
<p>when </p>
<p>the </p>
<p>FLS </p>
<p>Driver </p>
<p>Component </p>
<p>APIs </p>
<p>are </p>
<p>invoked </p>
<p>with </p>
<p>wrong </p>
<p>input </p>
<p>parameters or without initialization of the driver. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>                    Table 11-1               DET Errors of FLS Driver Component </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>1</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_UNINIT</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Erase, Fls_Write, Fls_Read, Fls_Compare, Fls_Cancel, </p>
<p>Fls_GetStatus, Fls_GetJobResult, Fls_MainFunction, Fls_Init, </p>
<p>Fls_ReadImmediate, Fls_BlankCheck, Fls_Suspend, </p>
<p>Fls_Resume, Fls_SetMode</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked before initialization.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_PARAM_ADDRESS</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Erase, Fls_Write, Fls_Read, Fls_Compare, Fls_ReadImmediate, </p>
<p>Fls_BlankCheck</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with a wrong address.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_PARAM_LENGTH</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Erase, Fls_Write, Fls_Read, Fls_Compare, Fls_ReadImmediate, </p>
<p>Fls_BlankCheck</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with a wrong length.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_PARAM_DATA</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Write, Fls_Read, Fls_Compare, Fls_ReadImmediate</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with a NULL buffer address.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>5</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_BUSY</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Init, Fls_Erase, Fls_Write, Fls_Read, Fls_Compare, </p>
<p>Fls_SetMode , Fls_ReadImmediate, Fls_BlankCheck </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked when the driver is still busy. </p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>6</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_VERIFY_ERASE_FAILED</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_MainFunction </p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the erase verification fails. </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 11                                                                               Development and Production Errors </b></p>
<p> </p>
<p><b>60 </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>7</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_VERIFY_WRITE_FAILED</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_MainFunction</p>
<p>  </p>
<p>Source of Error</p>
<p> </p>
<p>When the write verification fails.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>8</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_PARAM_CONFIG</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Init,</p>
<p> </p>
<p>Fls_SetMode</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>API initialization service invoked with wrong parameter.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>9</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_TIMEOUT</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_MainFunction</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>API service invoked when time out supervision of a write, erase or blank </p>
<p>check job failed</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>10</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_INVALID_DATABASE</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Init</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>API service Fls_Init called without/with a wrong database is reported </p>
<p>using following error code</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>11</b></p>
<p> </p>
<p>Error Code </p>
<p>FLS_E_PARAM_POINTER </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_GetVersionInfo</p>
<p> </p>
<p>Source of Error </p>
<p>API service Fls_GetVersionInfo invoked with a null pointer </p>
<p> </p>
<p><b>11.2 </b></p>
<p><b>FLS Driver Component Production Errors </b></p>
<p>The following table contains the DEM errors that are reported by FLS Driver </p>
<p>Component. These are the hardware errors reported during runtime. </p>
<p> </p>
<p><b>                      Table 11-2               DEM Errors of FLS Driver Component </b></p>
<p><b> </b></p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>1</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_ERASE_FAILED</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Erase</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the Erase API service is invoked and the erase job fails, error will be </p>
<p>reported  to  DEM  module.  The  Dem  module  shall  provide  the  interface </p>
<p>Dem_ReportErrorStatus to the BSW modules, to report BSW events which </p>
<p>are processed.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_WRITE_FAILED</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Write</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When  the Write  API  service  is  invoked  and  the  erase job fails,  error  will  be </p>
<p>reported </p>
<p>to </p>
<p>DEM </p>
<p>module. </p>
<p>The </p>
<p>Dem </p>
<p>module </p>
<p>shall </p>
<p>provide </p>
<p>the </p>
<p>interface </p>
<p>Dem_ReportErrorStatus to the BSW modules, to report BSW events which are </p>
<p>processed.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_READ_FAILED</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Development and Production Errors </b></p>
<p><b>Chapter 11 </b></p>
<p> </p>
<p><b>61 </b></p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Read</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the Read API service is invoked and the internal reading of the data </p>
<p>flash memory fails, error will be reported to DEM module. The Dem module </p>
<p>shall provide the interface Dem_ReportErrorStatus to the BSW modules, to </p>
<p>report BSW events which are processed.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_COMPARE_FAILED</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Compare</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When  the  Compare  API  service  is  invoked  and  when  the  comparison </p>
<p>between the data in the application buffer and the data flash memory fails, </p>
<p>error will be reported to DEM module. The Dem module shall provide the </p>
<p>interface  Dem_ReportErrorStatus  to  the  BSW  modules,  to  report  BSW </p>
<p>events which are processed.</p>
<p> </p>
<p><b>Sl. No. </b></p>
<p><b>5 </b></p>
<p><b> </b></p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_READ_FAILED_DED</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Read,</p>
<p> </p>
<p>Fls_ReadImmediate,</p>
<p> </p>
<p>Fls_Compare</p>
<p> </p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p> When  the  Read/ReadImmediate/Compare  API  service  is  invoked,  if  any </p>
<p>double bit error is detected, error will be reported to DEM module. The Dem </p>
<p>module  shall  provide  the  interface  Dem_ReportErrorStatus  to  the  BSW </p>
<p>modules, to report BSW events which are processed.</p>
<p> </p>
<p><b>Sl. No. </b></p>
<p><b>6 </b></p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_REG_WRITE_VERIFY </p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_</p>
<p>Init,Fls_Erase, Fls_Write, Fls_Read, Fls_Compare, Fls_Cancel, </p>
<p>Fls_ReadImmediate, Fls_BlankCheck, Fls_Suspend, Fls_Resume</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>If any write operation on the protection register fails, error shall be reported </p>
<p>to </p>
<p>DEM </p>
<p>module. </p>
<p>The </p>
<p>Dem </p>
<p>module </p>
<p>shall </p>
<p>provide </p>
<p>the </p>
<p>interface </p>
<p>Dem_ReportErrorStatus to the BSW modules, to report BSW events which </p>
<p>are processed.</p>
<p> </p>
<p><b>Sl. No. </b></p>
<p><b>7 </b></p>
<p>Error Code</p>
<p> </p>
<p>FLS_E_ECC_FAILED </p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_Init </p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>During initialization, FLS module shall read FRTEINT register and check if </p>
<p>any ECC error has occurred. If any errors are there, DEM shall be reported. </p>
<p>The Dem module shall provide the interface Dem_ReportErrorStatus to the </p>
<p>BSW modules, to report BSW events which are processed. </p>
<p><b>Sl. No. </b></p>
<p><b>8 </b></p>
<p>Error Code </p>
<p>FLS_E_HW_FAILURE </p>
<p>Related API(s)</p>
<p> </p>
<p>Fls_</p>
<p>Init, Fls_Erase, Fls_Write, Fls_Cancel, Fls_BlankCheck, Fls_Resume</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>If any failure has occurred due to mode switch or forced stop or clear status </p>
<p>command processing failure, DEM shall be reported. The Dem module shall </p>
<p>provide the interface Dem_ReportErrorStatus to the BSW modules, to report </p>
<p>BSW events which are processed. </p>
<p><b>Sl. No. </b></p>
<p><b>9 </b></p>
<p>Error Code </p>
<p>FLS_E_INT_INCONSISTENT </p>
<p>Related API(s) </p>
<p>FLS_FLENDNM_ISR </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 11                                                                               Development and Production Errors </b></p>
<p> </p>
<p><b>62 </b></p>
<p> </p>
<p>Source of Error </p>
<p>If any failure has occurred due to interrupt inconsistency has been identified </p>
<p>from  the  unknown  source,  DEM  shall  be  reported.  The  Dem  module  shall </p>
<p>provide the interface Dem_ReportErrorStatus to the BSW modules, to report </p>
<p>BSW events which are processed. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> Memory Organization </b></p>
<p><b>Chapter 12 </b></p>
<p> </p>
<p><b>63 </b></p>
<p><b>Chapter 12 </b></p>
<p><b>Memory Organization </b></p>
<p>Following picture depicts a typical memory organization, which must be met for </p>
<p>proper functioning of FLS Driver Component software. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>       </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Figure 12-1  FLS Driver Component Memory Organization </b></p>
<p>FLS Driver code related </p>
<p>to APIs are placed in this </p>
<p>memory.  </p>
<p>Segment Name: </p>
<p><b>FLS_PUBLIC_CODE_ROM </b></p>
<p> </p>
<p>Segment Name: </p>
<p><b>FLS_SAMPLE_CODE_ROM </b></p>
<p> </p>
<p> </p>
<p>Segment Name: </p>
<p><b>FLS_PRIVATE_CODE_RAM</b></p>
<p> </p>
<p> </p>
<p>   Segment Name: </p>
<p><b>   NO_INIT_RAM_UNSPECIFIED </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Segment Name: </p>
<p><b>NO_INIT_RAM_32BIT </b></p>
<p><b>R</b></p>
<p><b>A</b></p>
<p><b>M</b></p>
<p><b>E</b></p>
<p><b>K</b></p>
<p><b>L</b></p>
<p><b>F</b></p>
<p><b>E</b></p>
<p><b>L</b></p>
<p><b>K</b></p>
<p><b>F</b></p>
<p><b>L</b></p>
<p><b>E</b></p>
<p><b>K</b></p>
<p><b>A</b></p>
<p><b>F</b></p>
<p><b>L</b></p>
<p><b>K</b></p>
<p><b>S</b></p>
<p><b>E</b></p>
<p><b>L</b></p>
<p><b>F</b></p>
<p><b>K</b></p>
<p><b>E</b></p>
<p><b>L</b></p>
<p><b>1</b></p>
<p><b>B</b></p>
<p><b>I</b></p>
<p><b>T </b></p>
<p><b>R</b></p>
<p><b>A</b></p>
<p><b>M</b></p>
<p><b>_</b></p>
<p><b>1</b></p>
<p><b>B</b></p>
<p><b>I</b></p>
<p><b>T </b></p>
<p><b>R</b></p>
<p><b>A</b></p>
<p><b>M</b></p>
<p><b>_</b></p>
<p><b>1</b></p>
<p><b>B</b></p>
<p><b>I</b></p>
<p><b>T </b></p>
<p> </p>
<p><b>R</b></p>
<p><b>A</b></p>
<p><b>M</b></p>
<p><b>_</b></p>
<p><b>1</b></p>
<p><b> X1</b></p>
<p><b> </b></p>
<p><b>  X2</b></p>
<p><b> </b></p>
<p><b>X3</b></p>
<p><b> </b></p>
<p><b>ROM Section </b></p>
<p> </p>
<p><b>FLS Driver Component </b></p>
<p><b>Object Files </b></p>
<p> </p>
<p><b>RAM Section                                            </b></p>
<p> </p>
<p><b>Y1</b></p>
<p><b> </b></p>
<p><b>Y2</b></p>
<p><b> </b></p>
<p><b> Y3</b></p>
<p><b> </b></p>
<p><b> Y5</b></p>
<p><b> </b></p>
<p><b>X4</b></p>
<p><b> </b></p>
<p>Segment Name: </p>
<p><b>FLS_FAST_CODE_ROM </b></p>
<p> </p>
<p> </p>
<p>Segment Name: </p>
<p><b>FLS_CFG_DATA_UNSPECIFIED</b></p>
<p> </p>
<p>Segment Name: </p>
<p><b>NO_INIT_RAM_1BIT </b></p>
<p> </p>
<p>Segment Name: </p>
<p><b>RAM_1BIT </b></p>
<p><b>R</b></p>
<p><b>A</b></p>
<p><b>M</b></p>
<p><b>E</b></p>
<p><b>K</b></p>
<p><b>L</b></p>
<p><b>F</b></p>
<p><b>E</b></p>
<p><b>L</b></p>
<p><b>K</b></p>
<p><b>F</b></p>
<p><b>L</b></p>
<p><b>E</b></p>
<p><b>K</b></p>
<p><b>A</b></p>
<p><b>F</b></p>
<p><b>L</b></p>
<p><b>K</b></p>
<p><b>S</b></p>
<p><b>E</b></p>
<p><b>L</b></p>
<p><b>F</b></p>
<p><b>K</b></p>
<p><b>E</b></p>
<p><b>L</b></p>
<p><b>1</b></p>
<p><b>B</b></p>
<p><b>I</b></p>
<p><b>T </b></p>
<p><b>R</b></p>
<p><b>A</b></p>
<p><b>M</b></p>
<p><b>_</b></p>
<p><b>1</b></p>
<p><b>B</b></p>
<p><b>I</b></p>
<p><b>T </b></p>
<p><b>R</b></p>
<p><b>A</b></p>
<p><b>M</b></p>
<p><b>_</b></p>
<p><b>1</b></p>
<p><b>B</b></p>
<p><b>I</b></p>
<p><b>T </b></p>
<p> </p>
<p><b>R</b></p>
<p><b>A</b></p>
<p><b>M</b></p>
<p><b>_</b></p>
<p><b>1</b></p>
<p><b>B</b></p>
<p><b>I</b></p>
<p><b>T </b></p>
<p><b> </b></p>
<p><b> Y4</b></p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 12                                                                                                                              Memory Organization </b></p>
<p> </p>
<p><b>64 </b></p>
<p> </p>
<p><b>ROM Sections: </b></p>
<p> </p>
<p><b>FLS_PUBLIC_CODE_ROM </b></p>
<p><b>(X1): </b></p>
<p>This </p>
<p>section </p>
<p>consists </p>
<p>of </p>
<p>FLS </p>
<p>Driver </p>
<p>Component public APIs that can be located in code memory.  </p>
<p> </p>
<p><b>FLS_SAMPLE_CODE_ROM </b></p>
<p><b>(X2): </b></p>
<p>This </p>
<p>section </p>
<p>consists </p>
<p>of </p>
<p>FLS </p>
<p>sample </p>
<p>application that can be located in code memory.  </p>
<p> </p>
<p><b>FLS_FAST_CODE_ROM (X3): </b> Interrupt functions of FLS Driver Component </p>
<p>code that can be located in code memory. </p>
<p> </p>
<p><b>FLS_CFG_DATA_UNSPECIFIED(X4): </b></p>
<p>The </p>
<p>const </p>
<p>section </p>
<p>in </p>
<p>the </p>
<p>file </p>
<p>Fls_PBcfg.c is placed in this memory. </p>
<p> </p>
<p><b>RAM Sections:  </b></p>
<p> </p>
<p><b>FLS_PRIVATE_CODE_RAM (Y1): </b> This section in RAM is copied from ROM </p>
<p>section (X1) by the GHS start-up routines. </p>
<p> </p>
<p><b>RAM_1BIT (Y2): </b>This section consists of the global RAM variables of 1-bit size </p>
<p>that are initialized </p>
<p>by start-up </p>
<p>code </p>
<p>and </p>
<p>used </p>
<p>internally </p>
<p>by FLS software </p>
<p>component and other software components. The specific sections of respective </p>
<p>software components will be merged into this RAM section accordingly. </p>
<p> </p>
<p><b>NO_INIT_RAM_32BIT (Y3): </b>This section consists of the global RAM variables </p>
<p>of 32-bit size that are used internally  by FLS software component and other </p>
<p>software components. The specific sections of respective software components </p>
<p>will be merged into this RAM section accordingly. </p>
<p> </p>
<p><b>NO_INIT_RAM_1BIT (Y4): </b>This section consists of the global RAM variables of </p>
<p>1-bit  size  that  are  used  internally  by  FLS  software  component  and  other </p>
<p>software components. The specific sections of respective software components </p>
<p>will be merged into this RAM section accordingly. </p>
<p> </p>
<p><b>NO_INIT_RAM_UNSPECIFIED (Y5): </b> This section consists of the global RAM </p>
<p>variables  that  are  used  internally  by  FLS  software  component  and  other </p>
<p>software components. The specific sections of respective software components </p>
<p>will be merged into this RAM section accordingly.</p>
<h1 style="page-break-before:always; "></h1>
<p><b> P1M Specific Information                                                                                                   Chapter 13 </b></p>
<p> </p>
<p><b>65 </b></p>
<p><b>Chapter 13 </b></p>
<p><b>P1M Specific Information </b></p>
<p> </p>
<p>P1M supports following devices: </p>
<p> </p>
<p></p>
<p> </p>
<p>R7F701304 </p>
<p></p>
<p> </p>
<p>R7F701305 </p>
<p></p>
<p> </p>
<p>R7F701310 </p>
<p></p>
<p> </p>
<p>R7F701311 </p>
<p></p>
<p> </p>
<p>R7F701312 </p>
<p></p>
<p> </p>
<p>R7F701313 </p>
<p></p>
<p> </p>
<p>R7F701314 </p>
<p></p>
<p> </p>
<p>R7F701315 </p>
<p></p>
<p> </p>
<p>R7F701318 </p>
<p></p>
<p> </p>
<p>R7F701319 </p>
<p></p>
<p> </p>
<p>R7F701320 </p>
<p></p>
<p> </p>
<p>R7F701321 </p>
<p></p>
<p> </p>
<p>R7F701322 </p>
<p></p>
<p> </p>
<p>R7F701323 </p>
<p> </p>
<p><b>13.1. </b></p>
<p><b>Interaction between the User and FLS Driver </b></p>
<p><b>Component </b></p>
<p>The  details  of  the  services  supported  by  the  FLS  Driver  Component  to  the </p>
<p>upper layer users and the mapping of the channels to the hardware units is </p>
<p>provided in the following sections: </p>
<p> </p>
<p><b>13.1.1. Translation header File </b></p>
<p><b> </b></p>
<p> P1x_translation.h supports following devices: </p>
<p></p>
<p> </p>
<p>R7F701304 </p>
<p></p>
<p> </p>
<p>R7F701305 </p>
<p></p>
<p> </p>
<p>R7F701310 </p>
<p></p>
<p> </p>
<p>R7F701311 </p>
<p></p>
<p> </p>
<p>R7F701312 </p>
<p></p>
<p> </p>
<p>R7F701313 </p>
<p></p>
<p> </p>
<p>R7F701314 </p>
<p></p>
<p> </p>
<p>R7F701315 </p>
<p></p>
<p> </p>
<p>R7F701318 </p>
<p></p>
<p> </p>
<p>R7F701319 </p>
<p></p>
<p> </p>
<p>R7F701320 </p>
<p></p>
<p> </p>
<p>R7F701321 </p>
<p></p>
<p> </p>
<p>R7F701322 </p>
<p></p>
<p> </p>
<p>R7F701323 </p>
<p> </p>
<p> </p>
<p><b>13.1.2. Services Provided by FLS Driver Component to the User </b></p>
<p><b> </b></p>
<p>The FLS Driver Component provides the following functions to upper layers: </p>
<p>• </p>
<p>Erase memory sectors </p>
<p>• </p>
<p>Read flash contents to the application memory </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 13                                                                                                                     P1M Specific Information </b></p>
<p> </p>
<p><b>66 </b></p>
<p> </p>
<p>• </p>
<p>Fast read immediate to the application memory without blank check. </p>
<p>• </p>
<p>Validate flash contents comparing with the application memory </p>
<p>• </p>
<p>Cancel the on-going erase, write, read or compare requests. </p>
<p>• </p>
<p>Read the result of the last job </p>
<p>• </p>
<p>Blank check of flash memory sector. </p>
<p>• </p>
<p>Read the status of the FLS Driver Component. </p>
<p>• </p>
<p>Suspend the erase and write operation. </p>
<p>• </p>
<p>Resume the erase and write operation. </p>
<p> </p>
<p> </p>
<p><b>13.1.3. Parameter Definition File </b></p>
<p><b>          Table 13-1               PDF information for P1M </b></p>
<p><b> </b></p>
<p><b>PDF files </b></p>
<p><b>Devices </b></p>
<p><b>supported  </b></p>
<p>R403_FLS_P1M_04_05_10_to_15.arxml </p>
<p>701304, 701305, 701310, 701311, </p>
<p>701312, 701313, 701314, 701315 </p>
<p>R403_FLS_P1M_18_to_23.arxml </p>
<p>701318, 701319, 701320, 701321, </p>
<p>701322, 701323 </p>
<p>     </p>
<p><b>13.1.4. ISR Functions for FLS module </b></p>
<p>The table below provides the list of handler addresses corresponding to the </p>
<p>hardware unit ISR(s) in FLS Driver Component. The user should configure the </p>
<p>ISR functions mentioned below: </p>
<p> </p>
<p><b>          Table 13-2               Interrupt Functions for FLS Module </b></p>
<p> </p>
<p><b>Interrupt Source</b></p>
<p> </p>
<p><b>Name of the ISR Function</b></p>
<p> </p>
<p>FLENDNM_ISR  </p>
<p> </p>
<p> </p>
<p>FLS_FLENDNM_ISR</p>
<p> </p>
<p>FLS_FLENDNM_CAT2_ISR</p>
<p> </p>
<p> </p>
<p>          <b>Note: </b>The functions with “INTERRUPT “as pilot tag, provides an indication to the compiler that    </p>
<p>the function following this tag is an interrupt function type. The tag name can vary according to  </p>
<p><b>          </b>the compiler. User should take care of the tag name with respect to compiler used. </p>
<p> </p>
<p><b>13.1.5. Data Flash Address Space </b></p>
<p>The Data Flash address space of the RH850/P1x is as below: </p>
<p><b>Data Flash Address</b>: </p>
<p>512-KB device: FF20 0000</p>
<p>H</p>
<p> to FF20 7FFF</p>
<p>H</p>
<p> </p>
<p>1-MB device: FF20 0000</p>
<p>H</p>
<p> to FF20 7FFF</p>
<p>H</p>
<p> </p>
<p>2-MB device: FF20 0000</p>
<p>H</p>
<p> to FF20 FFFF</p>
<p>H</p>
<p> </p>
<p> </p>
<p><b>13.2. Sample Application </b></p>
<p><b>13.2.1. Sample Application Structure </b></p>
<p>The Sample Application is provided as reference to the user to understand the </p>
<p>method in which the FLS APIs can be invoked from the application. The Sample </p>
<p>Application is provided for three use-cases. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> P1M Specific Information                                                                                                   Chapter 13 </b></p>
<p> </p>
<p><b>67 </b></p>
<p> </p>
<p> </p>
<p><b>Figure 13-1 </b></p>
<p><b>Overview of FLS Driver Sample Application </b></p>
<p> </p>
<p>The Sample Application of the P1M is available in the path </p>
<p> </p>
<p>X1X\P1x\modules\fls\sample_application </p>
<p> </p>
<p>X1X\P1x\modules\fls\definition\&lt;AUTOSAR_version&gt;\&lt;SubVariant&gt;\  </p>
<p>         \R403_FLS_P1M_04_05_10_to_15.arxml </p>
<p>         \R403_FLS_P1M_18_to_23.arxml </p>
<p> </p>
<p>X1X\P1x\modules\fls\sample_application\&lt;SubVariant&gt;\  </p>
<p>                                                     &lt;AUTOSAR_version&gt;\ </p>
<p>\src\Fls_PBcfg.c </p>
<p>\include\Fls_Cfg.h </p>
<p>\include\Fls_Cbk.h </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701304_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701305_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701310_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701311_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701312_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701313_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701314_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701315_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701318_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701319_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701320_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701321_Sample.arxml </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701322_Sample.arxml </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 13                                                                                                                     P1M Specific Information </b></p>
<p> </p>
<p><b>68 </b></p>
<p> </p>
<p> </p>
<p>                                                                    \config\App_FLS_P1M_701323_Sample.arxml </p>
<p> </p>
<p> </p>
<p>In the Sample Application all the FLS APIs are invoked in the following </p>
<p>sequence: </p>
<p> </p>
<p>•  The API Fls_GetVersionInfo is invoked to get the version Information of FLS </p>
<p>component with a variable of Std_VersionInfoType type, after the call of this </p>
<p>API the passed parameter will get updated with the FLS Driver Component </p>
<p>version details. </p>
<p> </p>
<p>•  The  API  Fls_Init  is </p>
<p>invoked  with  config  pointer. </p>
<p>This  API  performs  the </p>
<p>initialization of the FLS Driver Component. This API initializes all the elements </p>
<p>(Global Variables) of Global structure. </p>
<p> </p>
<p>•  The API Fls_Erase is invoked to erase one or more complete Flash Sectors. </p>
<p> </p>
<p>•  The API Fls_Write is invoked to write the one or more complete flash pages to </p>
<p>the flash device from the application data buffer </p>
<p> </p>
<p>•  The API Fls_Read is invoked to read the requested length of flash memory and </p>
<p>stores it in the application data buffer. </p>
<p> </p>
<p>•  The API Fls_Compare is invoked to compare the contents of an area of flash </p>
<p>memory with that of an application data buffer. </p>
<p> </p>
<p>•  The API Fls_Cancel is invoked to cancel an on-going flash operations like read, </p>
<p>write, erase or compare job. </p>
<p> </p>
<p>•  The API Fls_Getstatus returns the FLS module state synchronously. </p>
<p> </p>
<p>•  The API Fls_GetJobResult returns the result of the last job synchronously. </p>
<p> </p>
<p>•  The API Fls_Setmode, this API sets the flash driver operation mode. </p>
<p> </p>
<p>•  The API Fls_Mainfunction is invoked performs processing of the flash Read, </p>
<p>Erase, write or compare jobs. It’s a scheduled function. The Fls_Mainfunction </p>
<p>accepts only read, write, erase or compare job at a time. </p>
<p> </p>
<p>•  The API Fls_ReadImmediate is invoked for reading of the flash memory. The </p>
<p>data from flash memory (source address) is read to the data buffer (Target </p>
<p>address) of application without performing blank check before read. </p>
<p> </p>
<p>•  The API Fls_BlankCheck is invoked to verify whether the memory is properly </p>
<p>erased before doing a write operation. </p>
<p> </p>
<p><b>Remark </b></p>
<p>The  API  Fls_MainFunction  needs  to  be  called  in  a  certain  time  interval </p>
<p>configured using the parameter &quot;FlsCallCycle&quot;. Hence, the sample application </p>
<p>invokes the API ‘Fls_MainFunction’ periodically in a loop with sufficient software </p>
<p>delay. Calling Fls_MainFunction in the interrupt mode of FLS will not perform </p>
<p>the substantial Flash operations; it will be executed as dummy function, except </p>
<p>that the timeout supervision will be performed within the Fls_MainFunction call </p>
<p>if timeout monitoring is enabled. </p>
<p> </p>
<p><b>13.2.2. Building Sample Application </b></p>
<p><b>13.2.2.1. Configuration Example </b></p>
<p>This section contains the typical configuration which is used for measuring </p>
<p>RAM/ROM consumption, stack depth and throughput details. </p>
<p><b>Configuration Details</b>: </p>
<p>App_FLS_&lt;SubVariant&gt;_&lt;Device_Name&gt;_Sample.arxml </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> P1M Specific Information                                                                                                   Chapter 13 </b></p>
<p> </p>
<p><b>69 </b></p>
<p><b>13.2.2.2. Debugging the Sample Application </b></p>
<p><b>Remark </b></p>
<p>GNU Make utility version 3.81 or above must be installed and available in the </p>
<p>path as defined by the environment user variable “GNUMAKE” to complete the </p>
<p>build process using the delivered sample files. </p>
<p> </p>
<p>Open a Command window and change the current working directory to “make” </p>
<p>directory present as mentioned in below path: </p>
<p>“external/X1X/P1x/common_family/make/&lt;compiler&gt;” </p>
<p> </p>
<p>Now execute batch file SampleApp.bat with following parameters: </p>
<p> </p>
<p>SampleApp.bat fls &lt;AUTOSAR_version&gt; &lt;Device_Name&gt; </p>
<p> </p>
<p>After this, the tool output files will be generated with the configuration as </p>
<p>mentioned is available in the path: </p>
<p>“X1X\P1x\modules\fls\sample_application\&lt;SubVariant&gt;\&lt;AUTOSAR_version&gt;</p>
<p>\config” </p>
<p> </p>
<p>• </p>
<p>After </p>
<p>this, </p>
<p>all </p>
<p>the </p>
<p>object </p>
<p>files, </p>
<p>map </p>
<p>file </p>
<p>and </p>
<p>the </p>
<p>executable </p>
<p>file </p>
<p>App_FLS_P1M_Sample.out will be available in the output folder </p>
<p>(“X1X\P1x\modules\fls\sample_application\&lt;SubVariant&gt;\obj\&lt;compiler&gt;” </p>
<p>in </p>
<p>this case). </p>
<p> </p>
<p>• </p>
<p>The executable can be loaded into the debugger and the sample application </p>
<p>can be executed. </p>
<p><b>Remark </b></p>
<p>Executable files with ‘*.out’ extension can be downloaded into the target </p>
<p>hardware with the help of Green Hills debugger. </p>
<p> </p>
<p>If any configuration changes (only post-build) are made to the ECU </p>
<p>Configuration Description files </p>
<p> </p>
<p>“X1X\P1x\modules\fls\sample_application\&lt;SubVariant&gt;\&lt;AUTOSAR_version&gt;\</p>
<p>config\</p>
<p> </p>
<p>App_FLS_P1M_&lt;Device_name&gt;_Sample.arxml” </p>
<p> </p>
<p> </p>
<p>App_FLS_P1M_&lt;Device_name&gt;_Sample.arxml” the database alone can be </p>
<p>generated by using the following commands. </p>
<p>                                               make –f App_FLS_&lt;SubVariant&gt;_Sample.mak generate_fls_config </p>
<p>                                               make –f App_FLS_&lt;SubVariant&gt;_Sample.mak </p>
<p>                                               App_FLS_&lt;SubVariant&gt;_Sample.s37            </p>
<p> </p>
<p>• </p>
<p>After this, a flash able Motorola S-Record file App_FLS_ </p>
<p>App_FLS_&lt;SubVariant&gt;_Sample.s37_Sample.s37 is available in the </p>
<p>output folder. </p>
<p> </p>
<p><b>Note:  </b></p>
<p><b>   </b>1<b>. </b>&lt;compiler&gt; for example can be “ghs”. </p>
<p>2. &lt;Device_Name&gt; indicates the device to be compiled, which can be 701304, </p>
<p>701305, 701310, 701311, 701312, 701313, 701314, 701315, 701318, </p>
<p>701319, 701320, 701321, 701322 or 701323. </p>
<p>3. &lt;SubVariant&gt; can be P1M. </p>
<p>                                        4. &lt;AUTOSAR_version&gt; can be 4.0.3. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 13                                                                                                                     P1M Specific Information </b></p>
<p> </p>
<p><b>70 </b></p>
<p> </p>
<p><b>13.3. Memory and Throughput  </b></p>
<p><b>13.3.1. </b></p>
<p><b>ROM/RAM Usage </b></p>
<p> </p>
<p>The details of memory usage for the typical configuration, with DET enabled as </p>
<p>provided  in  Section  13.2.2.1 <i> Configuration  Example </i> are  provided  in  this </p>
<p>section. </p>
<p><b>                      Table 13-3               ROM/RAM Details with DET </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>                      Table 13-4               ROM/RAM Details without DET </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>ROM/RAM</b></p>
<p> </p>
<p><b>Segment Name</b></p>
<p> </p>
<p><b>Size in bytes </b></p>
<p><b>for 701318</b></p>
<p> </p>
<p>1.</p>
<p> </p>
<p>ROM</p>
<p> </p>
<p> FLS_PUBLIC_CODE_ROM </p>
<p> FLS_PRIVATE_CODE_ROM </p>
<p> FLS_FAST_CODE_ROM </p>
<p> </p>
<p> FLS_CFG_DATA_UNSPECIFIED </p>
<p> </p>
<p> ROM.FLS_PRIVATE_CODE_RAM </p>
<p> </p>
<p>1834 </p>
<p> </p>
<p>5468 </p>
<p> </p>
<p> 170 </p>
<p> </p>
<p> 48 </p>
<p> </p>
<p>362 </p>
<p>2.</p>
<p> </p>
<p>RAM</p>
<p> </p>
<p> FLS_PRIVATE_CODE_RAM </p>
<p> </p>
<p> NO_INIT_RAM_UNSPECIFIED </p>
<p> </p>
<p> NO_INIT_RAM_32BIT </p>
<p> </p>
<p> RAM_1BIT </p>
<p> </p>
<p> NO_INIT_RAM_1BIT </p>
<p> </p>
<p>362 </p>
<p> </p>
<p>100 </p>
<p> </p>
<p>516 </p>
<p> </p>
<p>4 </p>
<p> </p>
<p>4</p>
<p> </p>
<p><b>Sl. No. </b></p>
<p><b>ROM/RAM </b></p>
<p><b>Segment Name </b></p>
<p><b>Size in bytes </b></p>
<p><b>for 701318 </b></p>
<p>1. </p>
<p>ROM </p>
<p> FLS_PUBLIC_CODE_ROM </p>
<p> FLS_PRIVATE_CODE_ROM </p>
<p> FLS_FAST_CODE_ROM </p>
<p> </p>
<p> FLS_CFG_DATA_UNSPECIFIED </p>
<p> </p>
<p> ROM.FLS_PRIVATE_CODE_RAM </p>
<p> </p>
<p>1350 </p>
<p> </p>
<p>4352 </p>
<p> </p>
<p> 144 </p>
<p> </p>
<p> 48 </p>
<p> </p>
<p>334 </p>
<p>2. </p>
<p>RAM </p>
<p> FLS_PRIVATE_CODE_RAM </p>
<p> </p>
<p> NO_INIT_RAM_UNSPECIFIED </p>
<p> </p>
<p> NO_INIT_RAM_32BIT </p>
<p> </p>
<p> RAM_1BIT </p>
<p> </p>
<p> NO_INIT_RAM_1BIT </p>
<p> </p>
<p>334 </p>
<p> </p>
<p>100 </p>
<p> </p>
<p>516 </p>
<p> </p>
<p>4 </p>
<p> </p>
<p>3</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b> P1M Specific Information                                                                                                   Chapter 13 </b></p>
<p> </p>
<p><b>71 </b></p>
<p><b>13.3.2. </b></p>
<p><b>Stack Depth </b></p>
<p> </p>
<p>The worst-case stack depth for FLS Driver Component is for the typical </p>
<p>configuration provided in Section 13.2.2.1 <i>Configuration Example</i>. </p>
<p> </p>
<p><b>                     Table 13-5               Stack Depth Table </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Sl. No</b></p>
<p> </p>
<p><b> </b></p>
<p><b>Device Name</b></p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b>Stack Depth (in Bytes) </b></p>
<p>1. </p>
<p> </p>
<p>R7F701318 </p>
<p> </p>
<p>                                       36 </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>13.3.3. </b></p>
<p><b>Throughput Details </b></p>
<p> </p>
<p>The  throughput details  of  the  APIs  for  the  configuration mentioned  in  the </p>
<p>Section 13.2.2.1<i>Configuration Example </i>are listed here. The clock frequency </p>
<p>used to measure the throughput is 160MHz for all APIs. </p>
<p> </p>
<p> </p>
<p><b>                   Table 13-6               Throughput Details of the APIs </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p> </p>
<p><b>API Name</b></p>
<p> </p>
<p><b>Throughput in </b></p>
<p><b>µ seconds for </b></p>
<p><b>701318 </b></p>
<p><b>with Interrupt </b></p>
<p><b>OFF </b></p>
<p><b>Throughput </b></p>
<p><b>in µ </b></p>
<p><b>seconds for </b></p>
<p><b>701318 with </b></p>
<p><b>Interrupt ON </b></p>
<p> </p>
<p><b>Remarks</b></p>
<p> </p>
<p>1.</p>
<p> </p>
<p> Fls_Init</p>
<p> </p>
<p>415.112 </p>
<p>416.650 </p>
<p>-</p>
<p> </p>
<p>2.</p>
<p> </p>
<p> Fls_Erase</p>
<p> </p>
<p>3.812 </p>
<p>4.687</p>
<p><b>*</b></p>
<p> </p>
<p>-</p>
<p> </p>
<p>3.</p>
<p> </p>
<p> Fls_Write</p>
<p> </p>
<p>3.862 </p>
<p>4.675 </p>
<p>-</p>
<p> </p>
<p>4.</p>
<p> </p>
<p> Fls_Cancel</p>
<p> </p>
<p>0.237 </p>
<p>0.287 </p>
<p>-</p>
<p> </p>
<p>5.</p>
<p> </p>
<p> Fls_GetStatus</p>
<p> </p>
<p>0.125 </p>
<p>0.125 </p>
<p>-</p>
<p> </p>
<p>6.</p>
<p> </p>
<p> Fls_GetJobResult</p>
<p> </p>
<p>0.137 </p>
<p>0.137 </p>
<p>-</p>
<p> </p>
<p>7.</p>
<p> </p>
<p> Fls_Read</p>
<p> </p>
<p>1.225 </p>
<p>1.562 </p>
<p>-</p>
<p> </p>
<p>8.</p>
<p> </p>
<p> Fls_Compare</p>
<p> </p>
<p>0.962 </p>
<p>0.862 </p>
<p>-</p>
<p> </p>
<p>9.</p>
<p> </p>
<p> Fls_GetVersionInfo</p>
<p> </p>
<p>0.15 </p>
<p>0.125 </p>
<p>- </p>
<p>10. </p>
<p> Fls_BlankCheck </p>
<p>2.862 </p>
<p>3.737</p>
<p><b>*</b></p>
<p> </p>
<p>- </p>
<p>11. </p>
<p> Fls_SetMode </p>
<p>0.312 </p>
<p>0.287 </p>
<p> </p>
<p>12.</p>
<p> </p>
<p> Fls_ReadImmediate </p>
<p>1.437 </p>
<p>1.4 </p>
<p>- </p>
<p>13.</p>
<p> </p>
<p> Erase Operation</p>
<p> </p>
<p>5320.237 </p>
<p>5220.937 </p>
<p>This </p>
<p>is </p>
<p>the </p>
<p>time </p>
<p>taken </p>
<p>for </p>
<p>the </p>
<p>complete </p>
<p>erase </p>
<p>operation </p>
<p>of </p>
<p>256 </p>
<p>bytes data length.</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 13                                                                                                                     P1M Specific Information </b></p>
<p> </p>
<p><b>72 </b></p>
<p> </p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p> </p>
<p><b>API Name</b></p>
<p> </p>
<p><b>Throughput in </b></p>
<p><b>µ seconds for </b></p>
<p><b>701318 </b></p>
<p><b>with Interrupt </b></p>
<p><b>OFF </b></p>
<p><b>Throughput </b></p>
<p><b>in µ </b></p>
<p><b>seconds for </b></p>
<p><b>701318 with </b></p>
<p><b>Interrupt ON </b></p>
<p> </p>
<p><b>Remarks</b></p>
<p> </p>
<p>14. </p>
<p> Write Operation</p>
<p> </p>
<p>6525.620 </p>
<p>6543.675 </p>
<p>This  is  the  time </p>
<p>taken </p>
<p>for </p>
<p>the </p>
<p>complete </p>
<p>write </p>
<p>operation  of  256 </p>
<p>bytes </p>
<p>data </p>
<p>length.</p>
<p> </p>
<p>15. </p>
<p> Blank Check Operation </p>
<p>176.35 </p>
<p>178.887 </p>
<p>This  is  the  time </p>
<p>taken </p>
<p>for </p>
<p>performing blank </p>
<p>check </p>
<p>operation </p>
<p>of 256 bytes data </p>
<p>length. </p>
<p>16.</p>
<p> </p>
<p> Read Immediate Operation </p>
<p>45.375 </p>
<p>48.375 </p>
<p>This  is  the  time </p>
<p>taken </p>
<p>for </p>
<p>the </p>
<p>complete </p>
<p>fast </p>
<p>read operation of </p>
<p>256 </p>
<p>bytes </p>
<p>data </p>
<p>length </p>
<p>without </p>
<p>performing blank </p>
<p>check </p>
<p>before </p>
<p>read. </p>
<p>17.</p>
<p> </p>
<p> Read Operation</p>
<p> </p>
<p>1498.237 </p>
<p>1501.475 </p>
<p>This  is  the  time </p>
<p>taken </p>
<p>for </p>
<p>the </p>
<p>complete </p>
<p>read </p>
<p>operation  of  256 </p>
<p>bytes </p>
<p>data </p>
<p>length.</p>
<p> </p>
<p>18. </p>
<p> Compare Operation</p>
<p> </p>
<p>236.712 </p>
<p>239.55 </p>
<p>This </p>
<p>is </p>
<p>the </p>
<p>time </p>
<p>taken </p>
<p>for </p>
<p>the </p>
<p>complete </p>
<p>compare </p>
<p>operation  of  256 </p>
<p>bytes data length.</p>
<p> </p>
<p> </p>
<p>19. </p>
<p> FLENDNM_ISR operation </p>
<p>NA </p>
<p>4.812 </p>
<p>This </p>
<p>is </p>
<p>the </p>
<p>time </p>
<p>taken </p>
<p>for </p>
<p>the </p>
<p>complete </p>
<p>Erase </p>
<p>of </p>
<p>1 </p>
<p>block </p>
<p>data </p>
<p>length. </p>
<p>NA </p>
<p>4.962 </p>
<p>This </p>
<p>is </p>
<p>the </p>
<p>time </p>
<p>taken </p>
<p>for </p>
<p>the </p>
<p>complete Write of </p>
<p>1 </p>
<p>word </p>
<p>data </p>
<p>length </p>
<p>20. </p>
<p> Fls_Suspend </p>
<p> </p>
<p>NA </p>
<p>0.225 </p>
<p>Suspend and </p>
<p>Resume </p>
<p>throughput are </p>
<p>taken for </p>
<p>interrupt mode as </p>
<p>per the </p>
<p>requirement </p>
<h1 style="page-break-before:always; "></h1>
<p><b> P1M Specific Information                                                                                                   Chapter 13 </b></p>
<p> </p>
<p><b>73 </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p> </p>
<p><b>API Name</b></p>
<p> </p>
<p><b>Throughput in </b></p>
<p><b>µ seconds for </b></p>
<p><b>701318 </b></p>
<p><b>with Interrupt </b></p>
<p><b>OFF </b></p>
<p><b>Throughput </b></p>
<p><b>in µ </b></p>
<p><b>seconds for </b></p>
<p><b>701318 with </b></p>
<p><b>Interrupt ON </b></p>
<p> </p>
<p><b>Remarks</b></p>
<p> </p>
<p>21. </p>
<p> Fls_Resume </p>
<p> </p>
<p>NA </p>
<p>4.3 </p>
<p>Suspend and </p>
<p>Resume </p>
<p>throughput are </p>
<p>taken for </p>
<p>interrupt mode as </p>
<p>per the </p>
<p>requirement </p>
<p> </p>
<p>22. </p>
<p> </p>
<p> </p>
<p>    23. </p>
<p>Fls_MainFunction - for single </p>
<p>Read Operation </p>
<p>1498.237 </p>
<p>NA </p>
<p>This is the time </p>
<p>taken for the </p>
<p>complete read </p>
<p>operation of 256 </p>
<p>bytes data length. </p>
<p>Fls_MainFunction - for single </p>
<p>Erase Atomic Operation </p>
<p>5.137 </p>
<p>NA </p>
<p> </p>
<p>This is the time </p>
<p>taken for Fls </p>
<p>scheduler to </p>
<p>complete the </p>
<p>single erase </p>
<p>atomic operation </p>
<p>24. </p>
<p>Fls_MainFunction - for single </p>
<p>Write Atomic Operation </p>
<p>3.137 </p>
<p>NA </p>
<p>This is the time </p>
<p>taken for Fls </p>
<p>scheduler to </p>
<p>complete the </p>
<p>single write </p>
<p>atomic operation </p>
<p> </p>
<p><b>NOTE: </b>The Throughput time for a Single Fls_Erase and Fls_BlankCheck operation is more </p>
<p>with Interrupt ON than with Interrupt OFF. </p>
<p>This is because in Interrupt ON, Throughput time includes the normal operation time along </p>
<p>with the Interrupt ISR execution time since the interrupt is generated immediately after the </p>
<p>command processing is complete and is serviced accordingly. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 13                                                                                                                     P1M Specific Information </b></p>
<p> </p>
<p><b>74 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Release Details </b></p>
<p><b>Chapter 14 </b></p>
<p> </p>
<p><b>75 </b></p>
<p><b>Chapter 14 </b></p>
<p><b>Release Details </b></p>
<p> </p>
<p><b>FLS Driver Software  </b></p>
<p> </p>
<p>Version: 1.0.5 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 14                                                                                                                                          Release Details </b></p>
<p> </p>
<p><b>76 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>77 </b></p>
<p><b>Revision History </b></p>
<p> </p>
<p><b>Sl.No.</b></p>
<p> </p>
<p><b>Description</b></p>
<p> </p>
<p><b>Version</b></p>
<p> </p>
<p><b>Date</b></p>
<p> </p>
<p>1.</p>
<p> </p>
<p>Initial Version </p>
<p> </p>
<p>1.0.0</p>
<p> </p>
<p>15-Feb-2016</p>
<p> </p>
<p>2. </p>
<p> </p>
<p>Following changes are made: </p>
<p>1. </p>
<p>Chapter 2 ‘Reference Documents’ updated to correct the device </p>
<p>manual name and version and corrected version of </p>
<p>'AUTOSAR_SWS_MemoryMapping.pdf' and </p>
<p>'AUTOSAR_SWS_CompilerAbstraction.pdf'. </p>
<p>2. </p>
<p>Updated Chapter 4 ‘ForeThoughts’ to add the precaution about </p>
<p>accessing hardware register in section 4.1 ‘General’. </p>
<p>3. </p>
<p>Updated Chapter 6 ‘Register Details’ to add ICFLENDNM register </p>
<p>wherever applicable and removed register details of Fls_SetFHVE </p>
<p>function. </p>
<p>4. </p>
<p>Updated Chapter 5 ‘Architecture Details’, to correct the description of </p>
<p>Fls_Suspend API. </p>
<p>5. </p>
<p>Chapter 12 ‘Memory Organization’ has been updated to remove the </p>
<p>sections FLS_BUFFER_CODE_RAM, </p>
<p>FLS_USER_BUFFER_CODE_RAM and </p>
<p>FLS_CFG_DBTOC_UNSPECIFIED and added NOINIT_RAM_32BIT </p>
<p>and FLS_CFG_DATA_UNSPECIFIED.  </p>
<p>6. </p>
<p>Updated Chapter 13.3 ‘Memory and Throughput’. </p>
<p>7. </p>
<p>Updated Chapter 14 ‘Release Details’ to correct the driver version. </p>
<p> </p>
<p> </p>
<p>1.0.1 </p>
<p>24-Mar-2016 </p>
<p>3. </p>
<p>Following changes are made: </p>
<p>1. </p>
<p>Added precondition items about critical protection and transient </p>
<p>hardware faults in chapter 4.2 ‘Precondition’. </p>
<p>2. </p>
<p>Updated Chapter 14 ‘Release Details’. </p>
<p>3. </p>
<p>Added a ‘Note’ below the table 'Supervisor mode and User mode </p>
<p>details'. </p>
<p>4. </p>
<p>Updated Chapter 13.3 ‘Memory and Throughput’. </p>
<p>5. </p>
<p>In chapter 8, heading changed to &quot;The Stub C header files:&quot; and </p>
<p>missing stub files are added. </p>
<p>6. </p>
<p>Table 4-1 is added to list protected resources in FLS driver </p>
<p>7. </p>
<p>Section 13.2 reference to .one and .html files are removed </p>
<p>8. </p>
<p>Note added in section 13.2.1 ISR function. </p>
<p>9. </p>
<p>Description added for the FLS Driver Component Files. </p>
<p>10.  Updated Chapter 6 ‘Register Details’ to add IMR register details. </p>
<p>11.  Merged parameter definition files in sections 13.1.3 and 13.2.1 </p>
<p>12.  Added new header file ‘Fls_RegWrite.h’ in section 3.1.1 and section </p>
<p>8. </p>
<p>13.  Updated R-Number </p>
<p>14.  Chapter 12 is updated for the modification of Memory  sections </p>
<p>1.0.2 </p>
<p>16-Jul-2016 </p>
<p>4. </p>
<p> Following changes are made: </p>
<p> </p>
<p>1. </p>
<p>Updated section 4 ‘Forethoughts’ </p>
<p>2. </p>
<p>Updated the table 11-1 ‘Development and Production Errors’ to add  </p>
<p>Fls_SetMode API under DET ‘FLS_E_PARAM_CONFIG’ </p>
<p>3. </p>
<p>Updated Chapter 13.3 ‘Memory and Throughput’ </p>
<p>4. </p>
<p>Updated chapter 12 Memory Organization </p>
<p>5. </p>
<p>Updated section 13.1.2 Services Provided by FLS Driver Component </p>
<p>to the User </p>
<p> </p>
<p>1.0.3 </p>
<p>21-Oct-2016 </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>78 </b></p>
<p> </p>
<p><b>Sl.No.</b></p>
<p> </p>
<p><b>Description</b></p>
<p> </p>
<p><b>Version</b></p>
<p> </p>
<p><b>Date</b></p>
<p> </p>
<p>5. </p>
<p>Following changes are made: </p>
<p>1. </p>
<p>Updated Table for Abbreviations and Acronyms to remove unused </p>
<p>Abbreviations/ Acronyms. </p>
<p>2. </p>
<p>Updated Chapter 2 Reference Documents. </p>
<p>3. </p>
<p>Updated section 4.1 ‘General’ to add information about Read, Read </p>
<p>Immediate,</p>
<p> </p>
<p>Suspend and Resume operations. </p>
<p>4. </p>
<p>Updated section 4.2 ‘Preconditions’ to add information about </p>
<p>BlankCheck operation. </p>
<p>5. </p>
<p>Updated Chapter 3 and Chapter 9 to rename the FLS Driver </p>
<p>Generation Tool reference document. </p>
<p>6. </p>
<p>Updated Section 13.3.1 with ROM/RAM usage values. </p>
<p>7. </p>
<p>Updated Section 13.3.3 ‘Throughput Details’ to add Note under </p>
<p>Table 13-6 Throughput Details of the APIs and updated the  </p>
<p>Throughput details. </p>
<p>8. </p>
<p>Updated section 12 ‘Memory Organization’ to remove unused </p>
<p>memory segments and their descriptions. </p>
<p>9. </p>
<p>Updated Chapter 14 for FLS Driver Software version. </p>
<p>10.  Updated notice, address and copyright information’s. </p>
<p>11.  Version of R-number is updated at the end of document. </p>
<p>12.  Updated Section 7.1 to add Cautions. </p>
<p>13.  Updated Section 10.3 with the details of Fls_Resume API. </p>
<p>1.0.4 </p>
<p> </p>
<p>17-Feb-2017 </p>
<p>6. </p>
<p>Following changes are made: </p>
<p>1. </p>
<p> Updated section 4.2 and section 10.3 with details of newly added   </p>
<p>notification function Fls_CallSwitchBFlashErrorNotification. </p>
<p>2. </p>
<p>Updated section 13.3 ‘Memory and Throughput’. </p>
<p>3. </p>
<p>Updated Chapter 14 for FLS Driver Software version. </p>
<p>4. </p>
<p>Version of R-number is updated at the end of document. </p>
<p>5. </p>
<p>Updated section name from FLS_START_SEC_PRIVATE_CODE </p>
<p>and FLS_STOP_SEC_PRIVATE_CODE to  </p>
<p>FLS_START_SEC_PRIVATERAM_CODE and     </p>
<p>FLS_STOP_SEC_PRIVATERAM_CODE respectively in section 4.2. </p>
<p>1.0.5 </p>
<p>04-May-2017 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b>79 </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>AUTOSAR MCAL R4.0.3 User's Manual </b></p>
<p><b>FLS Driver Component Ver.1.0.5 </b></p>
<p><b>Embedded User's Manual </b></p>
<p> </p>
<p>Publication Date: Rev.1.02, May 04, 2017 </p>
<p> </p>
<p> </p>
<p>Published by: Renesas Electronics Corporation </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>SALES </b></p>
<p><b>OFFICES</b></p>
<p> </p>
<p>http://www.renesas.com</p>
<p> </p>
<p>Refer  to </p>
<p>&quot;http://www.renesas.com/&quot; </p>
<p>for the latest  and detailed </p>
<p>information.</p>
<p> </p>
<p><b>Renesas Electronics America Inc. </b></p>
<p>2801 Scott Boulevard Santa Clara, CA 95050-2549, U.S.A. </p>
<p>Tel: +1-408-588-6000, Fax: +1-408-588-6130 </p>
<p><b>Renesas Electronics Canada Limited</b></p>
<p><b> </b></p>
<p>9251 Yonge Street, Suite 8309 Richmond Hill, Ontario Canada L4C 9T3 </p>
<p>Tel: +1-905-237-2004 </p>
<p><b>Renesas Electronics Europe Limited </b></p>
<p>Dukes Meadow, Millboard Road, Bourne End, Buckinghamshire, SL8 5FH, U.K </p>
<p>Tel: +44-1628-585-100, Fax: +44-1628-585-900 </p>
<p><b>Renesas Electronics Europe GmbH </b></p>
<p>Arcadiastrasse 10, 40472 Düsseldorf, Germany </p>
<p>Tel: +49-211-6503-0, Fax: +49-211-6503-1327 </p>
<p><b>Renesas Electronics (China) Co., Ltd. </b></p>
<p>Room 1709, Quantum Plaza, No.27 ZhiChunLu Haidian District, Beijing 100191, P.R.China </p>
<p>Tel: +86-10-8235-1155, Fax: +86-10-8235-7679 </p>
<p><b>Renesas Electronics (Shanghai) Co., Ltd. </b></p>
<p>Unit 301, Tower A, Central Towers, 555 Langao Road, Putuo District, Shanghai, P. R. China 200333 </p>
<p>Tel: +86-21-2226-0888, Fax: +86-21-2226-0999 </p>
<p><b>Renesas Electronics Hong Kong Limited</b></p>
<p><b> </b></p>
<p>Unit 1601-1611, 16/F., Tower 2, Grand Century Place, 193 Prince Edward Road West, Mongkok, Kowloon, Hong Kong </p>
<p>Tel: +852-2265-6688, Fax: +852 2886-9022 </p>
<p><b>Renesas Electronics Taiwan Co., Ltd. </b></p>
<p>13F, No. 363, Fu Shing North Road, Taipei 10543, Taiwan </p>
<p>Tel: +886-2-8175-9600, Fax: +886 2-8175-9670 </p>
<p><b>Renesas Electronics Singapore Pte. Ltd. </b></p>
<p>80 Bendemeer Road, Unit #06-02 Hyflux Innovation Centre, Singapore 339949 </p>
<p>Tel: +65-6213-0200, Fax: +65-6213-0300 </p>
<p><b>Renesas Electronics Malaysia Sdn.Bhd. </b></p>
<p>Unit 1207, Block B, Menara Amcorp, Amcorp Trade Centre, No. 18, Jln Persiaran Barat, 46050 Petaling Jaya, Selangor Darul Ehsan, Malaysia </p>
<p>Tel: +60-3-7955-9390, Fax: +60-3-7955-9510 </p>
<p><b>Renesas Electronics India Pvt. Ltd. </b></p>
<p>No.777C, 100 Feet Road, HAL II Stage, Indiranagar, Bangalore, India </p>
<p>Tel: +91-80-67208700, Fax: +91-80-67208777 </p>
<p><b>Renesas Electronics Korea Co., Ltd. </b></p>
<p>12F., 234 Teheran-ro, Gangnam-Gu, Seoul, 135-080, Korea </p>
<p>Tel: +82-2-558-3737, Fax: +82-2-558-5141 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>© 2006-2017 Renesas Electronics Corporation. All rights reserved. </p>
<p>Colophon 4.1 </p>
<h1 style="page-break-before:always; "></h1>
<p>AUTOSAR MCAL R4.0.3 </p>
<p>User's Manual </p>
<p>R20UT3710EJ0102 </p>
</body>
</html>
{% endraw %}